(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{132:function(e,t){},14:function(e,t,a){var n=a(75),i="/";window.mobileCheck();var r=n.create({baseURL:i});e.exports={join:function(e,t){return r.post("join",{id:e,username:t})},create:function(e,t){return r.post("create",{username:e,houseRule:t})},baseAPI:r}},158:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),r=a(31),o=a.n(r),s=(a(97),a(2)),c=a.n(s),l=a(5),u=a(1),d=(a(99),a(15)),p=a(30),h=a(36),m=a(9),f=a(56),v=a.n(f),b=null,g=function(e,t,a){var n="/waitingRoom";window.mobileCheck(),console.log(e),(b=v()(n,{query:{userToken:e}})).on("Game Found",(function(e){var a=e.token,n=e.playerid;console.log("Found",a,n),t({token:a,playerid:n})})),b.on("Critical Error",(function(e){a(e),b.close(),b=null}))},y=function(){b&&b.disconnect(),b=null},w=a(55).createStore,k=localStorage.getItem("token"),x=localStorage.getItem("id"),O=parseInt(localStorage.getItem("playerid")),E=localStorage.getItem("usertoken"),j={token:k,id:x,playerid:O,tempJoinID:null,joined:!1,loggedIn:!!k,userToken:E,loggedInUser:!!E,matchMaking:!1,skirmish:!1,competitive:!1},S=w((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,t=arguments.length>1?arguments[1]:void 0,a=t.id,n=t.playerid,i=t.token,r=t.type,o=t.tempJoinId,s=t.userToken;switch(console.log(r,a,n,i,s),r){case"LOG_IN":return localStorage.setItem("token",i),localStorage.setItem("id",a),localStorage.setItem("playerid",n),Object(m.a)({},e,{id:a,playerid:n,token:i,loggedIn:!0,skirmish:!1,matchMaking:!1});case"JOIN_LOG_IN":return localStorage.setItem("token",i),localStorage.setItem("id",a),localStorage.setItem("playerid",n),Object(m.a)({},e,{id:a,playerid:n,token:i,loggedIn:!0,joined:!0});case"LOG_OUT":return localStorage.removeItem("token"),localStorage.removeItem("id"),localStorage.removeItem("playerid"),Object(m.a)({},e,{id:null,token:null,playerid:null,loggedIn:!1});case"LOG_OUT_WITH_TEMP_JOIN":return localStorage.removeItem("token"),localStorage.removeItem("id"),localStorage.removeItem("playerid"),Object(m.a)({},e,{id:null,token:null,playerid:null,loggedIn:!1,tempJoinId:e.tempJoinId||o});case"LOG_IN_SKIRMISH_GAME":return Object(m.a)({},e,{playerid:n,token:i,loggedIn:!0,matchMaking:!0,skirmish:!0});case"LOG_OUT_SKIRMISH_GAME":return Object(m.a)({},e,{playerid:null,loggedIn:!1,token:null,skirmish:!1});case"END_MATCHMAKING":return Object(m.a)({},e,{matchMaking:!1});case"SET_TEMP_JOIN":return console.log(o),Object(m.a)({},e,{tempJoinId:o});case"JOINED":return Object(m.a)({},e,{joined:!0});case"LOG_IN_USER":return localStorage.setItem("usertoken",s),Object(m.a)({},e,{userToken:s,loggedInUser:!0});case"LOG_OUT_USER":return localStorage.removeItem("usertoken"),Object(m.a)({},e,{userToken:null,loggedInUser:!1,matchMaking:!1});default:return Object(m.a)({},e)}})),I=a(7),C=a(3),A=a(10),R=a(11),M=a(32),T=a(91),D=a(21),L=a(25),N=a(24),P=a(38),X=a.n(P),Y=function(e,t,a){for(var n in t)"object"==typeof e?"function"===typeof e[n]?a[n]=e[n]:"undefined"!=typeof e[n]?a[n]=X.a.cloneDeep(e[n]):a[n]=X.a.cloneDeep(t[n]):a[n]=X.a.cloneDeep(t[n])},B=function(e,t,a,n){return Math.sqrt(Math.pow(e-a,2)+Math.pow(t-n,2))},W=function(e,t,a,n){if(e===a&&t===n)return 0;if(e===a){if(t<n)return 270;if(t>n)return 90}if(t===n){if(e<a)return 0;if(a<e)return 180}var i=a-e,r=n-t,o=Math.atan(-r/i);return e<a&&t>n?F(o):e>a&&t>n||e>a&&t<n?180+F(o):e<a&&t<n?360+F(o):void 0},F=function(e){return 180*e/Math.PI},G=function(e){return e*Math.PI/180},z=function(e,t,a,n,i){return 0===i||360===i?[a,n]:V(e,t,W(e,t,a,n)+i,B(e,t,a,n))},V=function(e,t,a,n){var i=G(a),r=[0,90,180,270,360];if(-1!==r.indexOf(a)){var o=[[1,0],[0,1],[-1,0],[0,-1],[1,0]][r.indexOf(a)];return[e+o[0]*n,t-o[1]*n]}return[e+Math.cos(i)*n,t-Math.sin(i)*n]},_=function(e,t){var a=Object(u.a)(e,4),n=a[0],i=a[1],r=a[2],o=a[3],s=Object(u.a)(t,4),c=s[0],l=s[1],d=s[2],p=s[3];if(Math.round(n)===Math.round(r)||Math.round(c)===Math.round(d)){var h=z(0,0,n,i,30),m=Object(u.a)(h,2);n=m[0],i=m[1];var f=z(0,0,r,o,30),v=Object(u.a)(f,2);r=v[0],o=v[1];var b=z(0,0,c,l,30),g=Object(u.a)(b,2);c=g[0],l=g[1];var y=z(0,0,d,p,30),w=Object(u.a)(y,2);d=w[0],p=w[1]}var k=Math.min(n,r),x=Math.max(n,r),O=Math.min(c,d),E=Math.max(c,d),j=(i-o)/(n-r),S=(l-p)/(c-d),I=-n*j+i;if(j===S)return!1;var C=(-c*S+l-I)/(j-S);return C>k&&C<x&&C>O&&C<E&&[C,j*C+I]},U=function(e,t,a){var n=Object(u.a)(a,4),i=n[0],r=n[1],o=n[2],s=n[3],c=function(e,t,a,n,i,r){return Math.abs(W(e,t,i,r)-W(e,t,a,n))}(i,r,e,t,o,s),l=B(e,t,i,r),d=Math.abs(l*Math.cos(G(c))),p=Math.sqrt(Math.pow(l,2)-Math.pow(d,2));return!(d>B(i,r,o,s))&&(c=G(W(i,r,o,s)),[i+Math.cos(c)*d,r-Math.sin(c)*d,p])},Q=function(e,t,a){var n=e.split("."),i=t;n.forEach((function(e,t){t===n.length-1?Array.isArray(i)?i[parseInt(e)]=a:i[e]=a:i=Array.isArray(i)?i[parseInt(e)]:i[e]}))},H=function(e,t){var a=e.split("."),n=t;return a.forEach((function(e){n=Array.isArray(n)?n[parseInt(e)]:t[e]})),n},q={inputReference:{}};q.inputReference.movementIndex=["w","a","s","d","ArrowUp","ArrowLeft","ArrowDown","ArrowRight"],q.inputReference.coeffIndex=[[0,-1],[-1,0],[0,1],[1,0],[0,-1],[-1,0],[0,1],[1,0]],q.defaultAppConfig={initFunctions:["visualInit","mouseInputInit"],animateFunctions:["animate","update","render"],lastFrame:void 0,constantRender:!0,background:"black",pixelDensity:1,eventListeners:[],eventListenersFunction:[]},q.defaultObjectProps={shapes:[],animations:[],behaviors:[],behaviorFuncs:[],behaviorQueue:[],hoverEvents:[],animationCount:0,initFunctions:["createPreloader"],static:!0,x:0,y:0,rotation:0,positionIndicator:!1,display:!0,opacity:1,mouseUpEvent:[],mouseDownEvent:[],mouseMoveEvent:[],zIndex:0,alignX:!1,alignDirectionX:"right",alignMarginX:5,alignY:!1,alignDirectionY:"top",alignMarginY:5},q.defaultStorageProps={spacing:0,direction:"row",model:[],margin:0},q.defaultAdvanceStorageProps={paddingTop:10,paddingBottom:10,paddingLeft:10,paddingRight:10,backgroundFunction:null},q.defaultShapeOptions={kind:"rect",animations:[],hoverEvents:[],animationCount:0,x:0,y:0,rotation:0,scaleX:1,scaleY:1,color:"black",display:!0,lineWidth:1,opacity:1,borderColor:"yellow",borderWidth:10,border:!1,borderOnly:!1,shadow:null,mouseUpEvent:[],mouseDownEvent:[],mouseMoveEvent:[]},q.defaultRectOptions={w:0,h:0,clip:!1,clipImageLink:null,clipCanvas:null,clipSpriteSheetX:null,clipSpriteSheetY:null,spriteLengthX:null,spriteLengthY:null},q.defaultArcOptions={rad:0,arcDegree:360},q.defaultTextOptions={textAlign:"center",fontFamily:"Arial Bold",fontSize:10,text:"Hello World",fontBackwardCompatibility:void 0},q.defaultImgOptions={spriteLink:null,drawWidth:null,drawHeight:null,loadedFunction:void 0},q.defaultPolyOptions={points:[],specialPolygon:!1,numberOfSide:0,radius:10,clip:!1,clipImageLink:null},q.defaultLineOptions={points:[]},q.apps=[],q.gameloop={list:[],frameTime:void 0,lastFrame:void 0},q.gameloop.loop=function(e){requestAnimationFrame(q.gameloop.loop);for(var t=0;t<q.gameloop.list.length;t++)q.gameloop.list[t](q.apps[t]);void 0!==e&&(q.lastFrame=q.frameTime,q.frameTime=e)},q.gameloop.loop(),q.app=function(e,t){var a=this;this.options={},Y(t,q.defaultAppConfig,this.options),this.canvas=e,this.eventListeners=[],this.eventListenersFunction=[],this.options.initFunctions.forEach((function(e){return a[e]()})),this.objects=[],this.index=q.gameloop.list.length,q.gameloop.list.push(this.options.constantRender?this.turnFunctions:function(){}),q.apps.push(this)},q.app.prototype.turnFunctions=function(e){e.options.animateFunctions.forEach((function(t){return e[t]()}))},q.app.prototype.addEventListener=function(e,t){this.eventListeners.push(e),this.eventListenersFunction.push(t),this.canvas.addEventListener(e,t)},q.app.prototype.removeEventListenr=function(){var e=this;this.eventListeners.forEach((function(t,a){return e.canvas.removeEventListener(t,e.eventListenersFunction[a])}))},q.app.prototype.kill=function(){this.objects.forEach((function(e){e.shapes.forEach((function(e){return e.kill()})),e.kill()})),this.killed=!0,q.gameloop.list.splice(this.index,1),q.apps.splice(this.index,1),this.removeEventListenr()},q.app.prototype.update=function(){this.objects.forEach((function(e){"function"===typeof e.update&&e.update(e)}))},q.app.prototype.translateMouseCoor=function(e){var t,a;return e.pageX||e.pageY?(t=e.pageX,a=e.pageY):(t=e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,a=e.clientX+document.body.scrollTop+document.documentElement.scrollTop),this.canvas.parentElement.scrollLeft&&"fixed"!==this.canvas.style.position&&(t+=this.canvas.parentElement.scrollLeft),this.canvas.parentElement.scrollTop&&"fixed"!==this.canvas.style.position&&(t+=this.canvas.parentElement.scrollTop),t-=this.canvas.offsetLeft,a-=this.canvas.offsetTop,[t*this.pixelDensity,a*this.pixelDensity]},q.objectCount=0,q.object=function(){function e(t,a){var n=this;Object(A.a)(this,e),this.translateToRealPixel=function(e,t){return e.match(/%/)?parseInt(e.split("").filter((function(e){return"%"!==e})).join(""))/100*t:parseInt(e)},q.objectCount++,this.id=q.objectCount,this.parent=a,this.parent.objects.push(this),Y(t,q.defaultObjectProps,this),this.initFunctions.forEach((function(e){return n[e]()})),this.name=t.objectName?t.objectName:"Object ".concat(this.id)}return Object(R.a)(e,[{key:"changePosition",value:function(e,t){if(e)if(this.alignX){var a="left"===this.alignDirectionX||"center"===this.alignDirectionX?1:-1;this.alignMarginX=e-a*this.posX}else this.x=e;if(t)if(this.alignY){var n="top"===this.alignDirectionY||"center"===this.alignDirectionY?1:-1;this.alignMarginY=t-n*this.posY}else this.y=t}},{key:"kill",value:function(){this.parent.objects.splice(this.parent.objects.indexOf(this),1)}},{key:"collide",value:function(e){var t,a=Object(I.a)(this.shapes);try{for(a.s();!(t=a.n()).done;){var n,i=t.value,r=Object(I.a)(e.shapes);try{for(r.s();!(n=r.n()).done;){var o=n.value;if(i.collide(o))return!0}}catch(s){r.e(s)}finally{r.f()}}}catch(s){a.e(s)}finally{a.f()}return!1}},{key:"pointInObject",value:function(e,t){var a,n=Object(I.a)(this.shapes);try{for(n.s();!(a=n.n()).done;){if(a.value.pointInShape(e,t))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"findMax",value:function(){var e=[],t=[];return this.shapes.forEach((function(a){var n=a.findMax(),i=Object(u.a)(n,4),r=i[0],o=i[1],s=i[2],c=i[3];e=[].concat(Object(C.a)(e),[r,o]),t=[].concat(Object(C.a)(t),[s,c])})),[Math.min.apply(Math,Object(C.a)(e)),Math.max.apply(Math,Object(C.a)(e)),Math.min.apply(Math,Object(C.a)(t)),Math.max.apply(Math,Object(C.a)(t))]}},{key:"findThePositionThatIsRelativeToThisObjectFromAbsolutePosition",value:function(e,t){return[e-this.x,t-this.y]}},{key:"posX",get:function(){if(this.alignX)return("left"===this.alignDirectionX?0:"right"===this.alignDirectionX?this.parent.canvas.width:this.parent.canvas.width/2)+("left"===this.alignDirectionX||"center"===this.alignDirectionX?1:-1)*this.alignMarginX;if("number"===typeof this.x)return this.x;var e=this.x.split(" ");if(1===e.length)return this.translateToRealPixel(e[0],this.parent.canvas.width);for(var t=0;t<e.length;)if("+"===e[t]||"-"===e[t]){var a="+"===e[t]?1:-1;e[t]=this.translateToRealPixel(e.splice(t+1,1),this.parent.canvas.width)+a*this.translateToRealPixel(e.splice(t-1,1),this.parent.canvas.width)}else t++;return e[0]}},{key:"posY",get:function(){if(this.alignY)return("top"===this.alignDirectionY?0:"bottom"===this.alignDirectionY?this.parent.canvas.height:this.parent.canvas.height/2)+("top"===this.alignDirectionY||"center"===this.alignDirectionY?1:-1)*this.alignMarginY;if("number"===typeof this.y)return this.y;var e=this.y.split(" ");if(1===e.length)return this.translateToRealPixel(e[0],this.parent.canvas.height);for(var t=0;t<e.length;)if("+"===e[t]||"-"===e[t]){var a="+"===e[t]?1:-1;e[t]=this.translateToRealPixel(e.splice(t+1,1),this.parent.canvas.height)+a*this.translateToRealPixel(e.splice(t-1,1),this.parent.canvas.height)}else t++;return e[0]}},{key:"w",get:function(){return this.findMax()[1]-this.findMax()[0]}},{key:"h",get:function(){return this.findMax()[3]-this.findMax(2)}}]),e}(),q.templateNames=[],q.templates=[],q.template=function(e,t){q.templateNames.push(e),q.templates.push(t)},q.app.prototype.useTemplate=function(e,t){return q.templates[q.templateNames.indexOf(e)](t,void 0)},q.storage=function(e){Object(L.a)(a,e);var t=Object(N.a)(a);function a(e,n){var i;return Object(A.a)(this,a),i=t.call(this,e,n),Y(e,q.defaultStorageProps,Object(D.a)(i)),i.storageShapes=[],i.model=e.model||[],i.elementFunction=e.elementFunction||null,i.updateToModel(),i}return Object(R.a)(a,[{key:"updateToModel",value:function(){var e=this,t=Object(C.a)(this.model);if(this.storageShapes.forEach((function(e){e.kill()})),this.storageShapes=[],t.length&&this.elementFunction){var a;switch(this.direction){case"row-reverse":t.reverse();case"row":var n=(a=this.elementFunction(t[0],0)).width;a.kill();var i=-(n*t.length+this.spacing*(t.length-1))/2+.5*n+this.margin;t.forEach((function(t,a){var r=e.elementFunction(t,a);e.storageShapes.push(r),r.x=i+a*n+a*e.spacing}));break;case"column-reverse":t.reverse();case"column":var r=(a=this.elementFunction(t[0],0)).height;a.kill();var o=-(r*t.length+this.spacing*(t.length-1))/2+.5*r-this.margin;t.forEach((function(t,a){var n=e.elementFunction(t,a);e.storageShapes.push(n),n.y=o+a*r+a*e.spacing}))}return this.updateVisual(),this}}},{key:"totalLength",get:function(){if(!this.model.length)return 0;if(!this.elementFunction)return 0;var e;switch(this.direction){case"row-reverse":case"row":var t=(e=this.elementFunction(this.model[0],0)).width;return e.kill(),t*this.model.length+this.spacing*(this.model.length-1);case"column-reverse":case"column":var a=(e=this.elementFunction(this.model[0],0)).height;return e.kill(),a*this.model.length+this.spacing*(this.model.length-1);default:return 0}}}]),a}(q.object),q.advanceStorage=function(e){Object(L.a)(a,e);var t=Object(N.a)(a);function a(e,n){var i;return Object(A.a)(this,a),i=t.call(this,e,n),Y(e,q.defaultAdvanceStorageProps,Object(D.a)(i)),i.updateToModel(),i}return Object(R.a)(a,[{key:"updateToModel",value:function(){var e,t;if(Object(T.a)(Object(M.a)(a.prototype),"updateToModel",this).call(this),this.backgroundFunction)return this.backgroundShape=this.backgroundFunction(),this.direction.match(/column/)?(e=this.totalLength,t=Math.max.apply(Math,Object(C.a)(this.storageShapes.map((function(e){return e.w}))))):(t=this.totalLength,e=Math.max.apply(Math,Object(C.a)(this.storageShapes.map((function(e){return e.h}))))),this.backgroundShape.h=e+this.paddingBottom+this.paddingTop,this.backgroundShape.w=t+this.paddingLeft+this.paddingRight,this.backgroundShape.x+=this.paddingRight-this.paddingLeft,this.backgroundShape.y+=this.paddingTop-this.paddingBottom,this.shapes.splice(this.shapes.length-1,1),this.shapes.unshift(this.backgroundShape),this.updateVisual(),this}}]),a}(q.storage),q.spriteLinkReference=[],q.spriteImageReference=[],q.funcLists=[],q.sprite=function(e,t){var a=q.spriteLinkReference.indexOf(e);if(-1!==a){var n=q.spriteImageReference[a];return q.funcLists[a].push(t),n.complete&&requestAnimationFrame(t),n}var i=new Image,r=q.spriteImageReference.length;return i.onload=function(){q.funcLists[r].forEach((function(e){return e()}))},q.funcLists[r]=[],q.funcLists[r].push(t),i.src=e,q.spriteLinkReference.push(e),q.spriteImageReference.push(i),i},q.sound=function(){function e(t,a){var n=this;Object(A.a)(this,e),this.elem=document.createElement("audio"),this.elem.oncanplaythrough=function(){n.loaded=!0,n.updateQueue()},this.elem.loop=a,this.elem.volume=.2,this.elem.src=t,this.elem.setAttribute("preload","auto"),this.elem.setAttribute("controls","none"),this.elem.style.display="none",document.body.appendChild(this.elem),this.queue=1,this.running=!1,this.loaded=!1}return Object(R.a)(e,[{key:"updateQueue",value:function(){var e=this;!this.running&&this.queue&&this.loaded&&!q.mute&&(this.running=!0,this.elem.play(),setTimeout((function(){e.running=!1,e.updateQueue()}),this.elem.duration+300),this.queue--)}},{key:"addToQueue",value:function(){this.queue++,this.updateQueue()}}]),e}(),q.audioReference=[],q.audioLinkReference=[],q.playSound=function(e,t){if(q.audioLinkReference.indexOf(e)<0){var a=new q.sound(e,t);q.audioReference.push(a),q.audioLinkReference.push(a)}else q.audioReference[q.audioLinkReference.indexOf(e)].addToQueue()},q.stopAll=function(){Array.from(document.getElementsByTagName("audio")).forEach((function(e){e.pause()}))},q.muteAll=function(){q.mute=!0,q.stopAll(),Array.from(document.getElementsByTagName("audio")).forEach((function(e){return e.mute=!0}))},q.unmuteAll=function(){q.mute=!1,q.stopAll(),Array.from(document.getElementsByTagName("audio")).forEach((function(e){return e.mute=!1})),q.audioReference.forEach((function(e){e.elem.loop&&e.addToQueue()}))},q.component=function(){function e(t){if(Object(A.a)(this,e),q.components||(q.components={}),!t.name)throw Error("Component must have name");q.components[t.name]=t}return Object(R.a)(e,null,[{key:"addComponent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2?arguments[2]:void 0,n=Object(m.a)({},q.components[e]);for(var i in t)n[i]=t[i];return new q[n.kind](n,a)}}]),e}(),q.addComponent=function(e){return new q.component(e)},q.classes={},q.addClass=function(e,t){return q.classes[e]=t},q.shape=function(){function e(t,a){if(Object(A.a)(this,e),t.class){var n,i=Object(I.a)(t.class.split(" "));try{for(i.s();!(n=i.n()).done;){var r=n.value;for(var o in q.classes[r]||{})t.importantAttr&&t.importantAttr.split(" ").includes(o)||(t[o]=q.classes[r][o])}}catch(s){i.e(s)}finally{i.f()}}this.kind=t.kind,this.parent=a,this.parent.shapes.push(this),Y(t,q.defaultShapeOptions,this)}return Object(R.a)(e,[{key:"kill",value:function(){var e=this.parent.shapes.indexOf(this);e<0||(this.parent.shapes.splice(e,1),this.parent.updateVisual())}},{key:"findVertex",value:function(){return[]}},{key:"findMax",value:function(){var e=this.findVertex(),t=[],a=[];e.forEach((function(e){var n=Object(u.a)(e,2),i=n[0],r=n[1];t.push(i),a.push(r)}));var n=-this.borderWidthIfBorderIsOn,i=this.borderWidthIfBorderIsOn,r=-this.borderWidthIfBorderIsOn,o=this.borderWidthIfBorderIsOn;if(this.shadow){var s=-this.shadow.blur-2,c=this.shadow.blur+2,l=-this.shadow.blur-2,d=this.shadow.blur+2;this.shadow.offsetX&&(s+=this.shadow.offsetX,c+=this.shadow.offsetX),this.shadow.offsetY&&(l+=this.shadow.offsetY,d+=this.shadow.offsetY),s<0&&(n+=s),c>0&&(i+=c),l<0&&(r+=l),d>0&&(o+=d)}return[Math.min.apply(Math,t)+n,Math.max.apply(Math,t)+i,Math.min.apply(Math,a)+r,Math.max.apply(Math,a)+o]}},{key:"pointInShape",value:function(e,t){var a=this.findSides(),n=this.findMax(),i=Object(u.a)(n,4),r=i[0],o=i[1],s=i[2],c=i[3],l=[e,t,e+B(e,t,o,c),t],d=0;return!(e>o||e<r||t>c||t<s)&&(a.forEach((function(e){_(e,l)&&d++})),!(d%2===0))}},{key:"findSides",value:function(){for(var e=this.findVertex(),t=[],a=0;a<e.length;a++)t.push([].concat(Object(C.a)(e[a]),Object(C.a)(e[a+1]?e[a+1]:e[0])));return t}},{key:"collide",value:function(e){if("arc"===e.kind)return e.collide(this);var t=this.findMax(),a=Object(u.a)(t,4),n=a[0],i=a[1],r=a[2],o=a[3],s=e.findMax(),c=Object(u.a)(s,4),l=c[0],d=c[1],p=c[2],h=c[3];if(i<d&&n>l&&o<h&&r>p||d<i&&l>n&&h<o&&p>r)return!0;var m,f=this.findSides(),v=e.findSides(),b=Object(I.a)(f);try{for(b.s();!(m=b.n()).done;){var g,y=m.value,w=Object(I.a)(v);try{for(w.s();!(g=w.n()).done;){var k=g.value;if(_(y,k))return!0}}catch(x){w.e(x)}finally{w.f()}}}catch(x){b.e(x)}finally{b.f()}return!1}},{key:"absoluteX",get:function(){return this.x+this.parent.posX}},{key:"absoluteY",get:function(){return this.y+this.parent.posY}},{key:"hasBorder",get:function(){return this.border||this.borderOnly}},{key:"width",get:function(){return(this.hasBorder?this.w+this.borderWidth:this.w)*this.scaleX}},{key:"height",get:function(){return(this.hasBorder?this.h+this.borderWidth:this.h)*this.scaleY}},{key:"outOfBound",get:function(){var e=this.findMax(),t=Object(u.a)(e,4),a=t[0],n=t[1],i=t[2],r=t[3],o=this.parent.parent.canvas,s=o.width,c=o.height;return a>s||n<0||i>c||r<0}},{key:"borderWidthIfBorderIsOn",get:function(){return this.border||this.borderOnly?this.borderWidth:0}}]),e}(),q.rect=function(e){Object(L.a)(a,e);var t=Object(N.a)(a);function a(e,n){var i;return Object(A.a)(this,a),i=t.call(this,e,n),Y(e,q.defaultRectOptions,Object(D.a)(i)),i}return Object(R.a)(a,[{key:"findVertex",value:function(){var e=this,t=[];return[[1,-1],[-1,-1],[-1,1],[1,1]].forEach((function(a){var n=Object(u.a)(a,2),i=n[0],r=n[1],o=e.absoluteX+.5*e.width*i,s=e.absoluteY+.5*e.height*r;t.push(z(e.absoluteX,e.absoluteY,o,s,e.rotation))})),t}}]),a}(q.shape),q.arc=function(e){Object(L.a)(a,e);var t=Object(N.a)(a);function a(e,n){var i;return Object(A.a)(this,a),i=t.call(this,e,n),Y(e,q.defaultArcOptions,Object(D.a)(i)),i}return Object(R.a)(a,[{key:"pointInShape",value:function(e,t){var a=W(this.absoluteX,this.absoluteY,e,t);return a>this.minAngle&&a<this.maxAngle&&B(this.absoluteX,this.absoluteY,e,t)<=this.radius}},{key:"findMax",value:function(){var e=[this.absoluteX-this.radius,this.absoluteX+this.radius,this.absoluteY-this.radius,this.absoluteY+this.radius],t=[this.absoluteX,this.absoluteX+Math.cos(this.minRadAngle)*this.radius,this.absoluteX+Math.cos(this.maxRadAngle)*this.radius],a=[this.absoluteY,this.absoluteY-Math.sin(this.minRadAngle)*this.radius,this.absoluteY-Math.sin(this.maxRadAngle)*this.radius];return this.pointInShape(e[0],this.absoluteY)||(e[0]=Math.min.apply(Math,t)-this.borderWidthIfBorderIsOn/2),this.pointInShape(e[1],this.absoluteY)||(e[1]=Math.max.apply(Math,t)+this.borderWidthIfBorderIsOn/2),this.pointInShape(this.absoluteX,e[2])||(e[2]=Math.min.apply(Math,a)-this.borderWidthIfBorderIsOn/2),this.pointInShape(this.absoluteX,e[3])||(e[3]=Math.max.apply(Math,a)+this.borderWidthIfBorderIsOn/2),e}},{key:"findVertex",value:function(){var e=this.findMax(),t=Object(u.a)(e,4),a=t[0],n=t[1],i=t[2],r=t[3],o=[this.absoluteX+Math.cos(this.minRadAngle)*this.radius,this.absoluteX+Math.cos(this.maxRadAngle)*this.radius,this.absoluteX+this.radius,this.absoluteX-this.radius,this.absoluteX],s=[this.absoluteY-Math.sin(this.minRadAngle)*this.radius,this.absoluteY-Math.sin(this.maxRadAngle)*this.radius,this.absoluteY+this.radius,this.absoluteY-this.radius,this.absoluteY];return[[a,s[o.indexOf(a)]],[n,s[o.indexOf(n)]],[o[s.indexOf(i)],i],[o[s.indexOf(r)],r]]}},{key:"fidnSides",value:function(){return 360!==this.arcDegree&&[[this.absoluteX,this.absoluteY,this.absoluteX+Math.cos(this.minRadAngle)*this.radius,this.absoluteY-Math.sin(this.minRadAngle)*this.radius],[this.absoluteX,this.absoluteY,this.absoluteX+Math.cos(this.maxRadAngle)*this.radius,this.absoluteY-Math.sin(this.maxRadAngle)*this.radius]]}},{key:"collide",value:function(e){var t,a=this.findVertex(),n=e.findVertex(),i=Object(I.a)(a);try{for(i.s();!(t=i.n()).done;){var r=Object(u.a)(t.value,2),o=r[0],s=r[1];if(e.pointInShape(o,s))return!0}}catch(k){i.e(k)}finally{i.f()}var c,l=Object(I.a)(n);try{for(l.s();!(c=l.n()).done;){var d=Object(u.a)(c.value,2),p=d[0],h=d[1];if(this.pointInShape(p,h))return!0}}catch(k){l.e(k)}finally{l.f()}if("arc"===e.kind){if(this.pureCircle&&e.pureCircle)return B(this.absoluteX,this.absoluteY,e.absoluteX,e.absoluteY)<=this.radius+e.radius;if(B(this.absoluteX,this.absoluteY,e.absoluteX,e.absoluteY)>this.radius+e.radius)return!1;var m=W(this.absoluteX,this.absoluteY,e.absoluteX,e.absoluteY),f=W(e.absoluteX,e.absoluteY,this.absoluteX,this.absoluteY);return m<this.maxAngle&&m>this.minAngle&&f<e.maxAngle&&f>e.minAngle}var v,b=e.findSides(),g=Object(I.a)(b);try{for(g.s();!(v=g.n()).done;){var y=v.value,w=U(this.absoluteX,this.absoluteY,y);if(w&&this.pointInShape(w[0],w[1]))return!0}}catch(k){g.e(k)}finally{g.f()}return!1}},{key:"radius",get:function(){return this.hasBorder?this.rad+this.borderWidth:this.rad}},{key:"minAngle",get:function(){return this.rotation}},{key:"maxAngle",get:function(){return this.rotation+this.arcDegree}},{key:"minRadAngle",get:function(){return G(this.minAngle)}},{key:"maxRadAngle",get:function(){return G(this.maxAngle)}},{key:"pureCircle",get:function(){return 360===this.arcDegree}}]),a}(q.shape),q.roundedRectangle=function(e){Object(L.a)(a,e);var t=Object(N.a)(a);function a(e,n){var i;return Object(A.a)(this,a),(i=t.call(this,e,n)).borderRadius=e.borderRadius||0,i.clip&&(e.clipCanvas?(i.clipImage=e.clipCanvas,i.clipCanvas=!0):i.clipImage=q.sprite(i.clipImageLink,(function(){i.parent.updateVisual()}))),i}return Object(R.a)(a,[{key:"changeClipImage",value:function(e){var t=this;this.clipImage=q.sprite(e,(function(){t.parent.updateVisual()}))}},{key:"clipImageLoaded",get:function(){return!!this.clip&&(!!this.clipCanvas||this.clipImage.complete)}}]),a}(q.rect),q.poly=function(e){Object(L.a)(a,e);var t=Object(N.a)(a);function a(e,n){var i;return Object(A.a)(this,a),i=t.call(this,e,n),Y(e,q.defaultPolyOptions,Object(D.a)(i)),i.clip&&(i.clipImage=q.sprite(i.clipImageLink,(function(){i.parent.updateVisual()}))),i}return Object(R.a)(a,[{key:"findVertex",value:function(){var e=this;return this.polyPoints.map((function(t){var a=Object(u.a)(t,2),n=a[0],i=a[1];return z(e.absoluteX,e.absoluteY,n+e.absoluteX,i+e.absoluteY,e.rotation)}))}},{key:"clipImageLoaded",get:function(){return!!this.clip&&this.clipImage.complete}},{key:"polyPoints",get:function(){if(!this.specialPolygon)return this.points;for(var e=360/this.numberOfSide,t=[],a=0;a<this.numberOfSide;a++)t.push(V(0,0,e*a,this.radius));return t}},{key:"width",get:function(){return this.findMax()[1]-this.findMax()[0]}},{key:"height",get:function(){return this.findMax()[3]-this.findMax()[2]}},{key:"sideLength",get:function(){if(!this.specialPolygon)return null;var e=G(360/this.numberOfSide);return Math.sqrt(2*Math.pow(this.radius,2)-2*Math.pow(this.radius,2)*Math.cos(e))}}]),a}(q.shape),q.line=function(e){Object(L.a)(a,e);var t=Object(N.a)(a);function a(e,n){var i;return Object(A.a)(this,a),i=t.call(this,e,n),Y(e,q.defaultLineOptions,Object(D.a)(i)),i}return Object(R.a)(a,[{key:"findVertex",value:function(){var e=this,t=[],a=function(e){var a,n=Object(u.a)(e,2),i=n[0],r=n[1],o=Object(I.a)(t);try{for(o.s();!(a=o.n()).done;){var s=a.value,c=Object(u.a)(s,2),l=c[0],d=c[1];if(~~(i+.5)===~~(l+.5)&&~~(r+.5)===~~(d+.5))return!1}}catch(p){o.e(p)}finally{o.f()}return!0},n=Object(C.a)(this.rotatedPoints);return n.forEach((function(i,r){var o=Object(u.a)(i,2),s=o[0],c=o[1];if(r!==n.length-1){var l=Object(u.a)(e.rotatedPoints[r+1],2),d=l[0],p=l[1],h=B(s,c,d,p),m=Math.atan(e.lineWidth/2/h),f=W(s,c,d,p),v=F(m)+f,b=Math.sqrt(h*h+.5*e.lineWidth*(.5*e.lineWidth)),g=V(s,c,v,b),y=V.apply(void 0,Object(C.a)(g).concat([180+f,h])),w=V.apply(void 0,Object(C.a)(y).concat([270+f,h])),k=V.apply(void 0,Object(C.a)(w).concat([f,h]));a(k)&&t.push(k),a(g)&&t.push(g),a(y)&&t.push(y),a(w)&&t.push(w)}})),t}},{key:"rotatedPoints",get:function(){var e=this;return this.points.map((function(t){var a=Object(u.a)(t,2),n=a[0],i=a[1];return z(e.absoluteX,e.absoluteY,n+e.absoluteX,i+e.absoluteY,e.rotation)}))}}]),a}(q.shape),q.text=function(e){Object(L.a)(a,e);var t=Object(N.a)(a);function a(e,n){var i;return Object(A.a)(this,a),i=t.call(this,e,n),Y(e,q.defaultTextOptions,Object(D.a)(i)),e.font&&(i.fontBackwardCompatibility=e.font),i}return Object(R.a)(a,[{key:"findVertex",value:function(){var e,t=this,a=1;"center"===this.textAlign?e=[[1,-1],[-1,-1],[-1,.8],[1,.8]]:("right"===this.textAlign&&(a=-1),e=[[2,-1],[0,-1],[0,.8],[2,.8]].map((function(e){return[e[0]*a,e[1]]})));var n=[];return e.forEach((function(e){var a=Object(u.a)(e,2),i=a[0],r=a[1],o=t.absoluteX+.5*t.width*i,s=t.absoluteY+.5*t.height*r;n.push(z(t.absoluteX,t.absoluteY,o,s,t.rotation))})),n}},{key:"font",get:function(){return this.fontBackwardCompatibility||"".concat(this.fontSize,"px ").concat(this.fontFamily)}},{key:"textSize",get:function(){var e=q.apps[0].context;e.save(),e.font=this.font;var t=e.measureText(this.text).width,a=e.measureText("gM").width;return e.restore(),[t,a]}},{key:"w",get:function(){return this.textSize[0]+this.borderWidthIfBorderIsOn}},{key:"h",get:function(){return this.textSize[1]+this.borderWidthIfBorderIsOn}}]),a}(q.shape),q.img=function(e){Object(L.a)(a,e);var t=Object(N.a)(a);function a(e,n){var i;return Object(A.a)(this,a),i=t.call(this,e,n),Y(e,q.defaultImgOptions,Object(D.a)(i)),i.sprite=q.sprite(i.spriteLink,(function(){i.loadedFunction&&i.loadedFunction(),i.parent.updateVisual()})),i}return Object(R.a)(a,[{key:"findVertex",value:function(){var e=this,t=[];return[[1,-1],[-1,-1],[-1,1],[1,1]].forEach((function(a){var n=Object(u.a)(a,2),i=n[0],r=n[1],o=e.absoluteX+.5*e.width*i,s=e.absoluteY+.5*e.height*r;t.push(z(e.absoluteX,e.absoluteY,o,s,e.rotation))})),t}},{key:"imageLoaded",get:function(){return this.sprite.complete}},{key:"w",get:function(){return this.drawWidth?this.drawWidth:this.imageLoaded?this.drawHeight?this.drawHeight*this.sprite.width/this.sprite.height:this.sprite.width:0}},{key:"h",get:function(){return this.drawHeight?this.drawHeight:this.imageLoaded?this.drawWidth?this.drawWidth*this.sprite.height/this.sprite.width:this.sprite.height:0}}]),a}(q.shape),q.object.prototype.attachQuickMovement=function(e,t,a){var n=!0,i=this;return document.addEventListener("keydown",(function(r){n&&-1!==q.inputReference.movementIndex.indexOf(r.key)&&(i.x+=q.inputReference.coeffIndex[q.inputReference.movementIndex.indexOf(r.key)][0]*e,i.y+=q.inputReference.coeffIndex[q.inputReference.movementIndex.indexOf(r.key)][1]*e,i.updateVisual(),a&&a(r,i),n=!1,setTimeout((function(){n=!0}),t))})),this},q.app.prototype.startCursor=function(){this.canvas.style.cursor="pointer"},q.app.prototype.endCursor=function(){this.canvas.style.cursor="default"},q.object.prototype.enterCursorEvent=function(){var e=this;this.alreadyCursorEvent||(this.alreadyCursorEvent=!0,this.hoverEvent((function(){return e.parent.startCursor()}),(function(){return e.parent.endCursor()})))},q.shape.prototype.enterCursorEvent=function(){var e=this;this.alreadyCursorEvent||(this.alreadyCursorEvent=!0,this.hoverEvent((function(){return e.parent.parent.startCursor()}),(function(){return e.parent.parent.endCursor()})))},q.app.prototype.attachEvent=function(e,t){var a=this,n=e;if(window.mobileCheck())switch(n){case"mousedown":n="touchstart";break;case"mouseup":n="touchend";break;case"mousemove":n="touchmove"}this.addEventListener(n,(function(e){if(!a.killed)if(window.mobileCheck())Array.from(e.changedTouches).forEach((function(e){var n=a.translateMouseCoor(e),i=Object(u.a)(n,2),r=i[0],o=i[1];t(r,o)}));else{var n=a.translateMouseCoor(e),i=Object(u.a)(n,2),r=i[0],o=i[1];t(r,o)}}))},q.app.prototype.mouseInputInit=function(){var e=this,t=function(t,a,n){if(0!==e.objects.length){for(var i=e.objects.length;i--;i>=0){var r=e.objects[i];if(0!==r[n].length&&(r.display&&r.pointInObject(t,a))){var o,s=Object(I.a)(r[n]);try{for(s.s();!(o=s.n()).done;){(0,o.value)(t,a)}}catch(m){s.e(m)}finally{s.f()}break}}e:for(var c=e.objects.length;c--;c>=0){var l=e.objects[c];if(0!==l.shapes.length&&l.display)for(var u=l.shapes.length;u--;u>=0){var d=l.shapes[u];if(0!==d[n].length&&(d.display&&d.pointInShape(t,a))){var p,h=Object(I.a)(d[n]);try{for(h.s();!(p=h.n()).done;){(0,p.value)(t,a)}}catch(m){h.e(m)}finally{h.f()}break e}}}}};this.attachEvent("mouseup",(function(e,a){return t(e,a,"mouseUpEvent")})),this.attachEvent("mousemove",(function(e,a){return t(e,a,"mouseMoveEvent")})),this.attachEvent("mousedown",(function(e,a){return t(e,a,"mouseDownEvent")}))},q.object.prototype.pressedEvent=function(e){return this.enterCursorEvent(),this.mouseUpEvent.push(e),this},q.object.prototype.makeDraggable=function(e,t){var a=this;this.enterCursorEvent(),this.onDrag=!1;var n=this;this.draggable=!0;var i=0,r=0;return this.mouseDownEvent.push((function(e,t){n.draggable&&(n.onDrag||(n.onDrag=!0,i=e-n.posX,r=t-n.posY))})),this.parent.attachEvent("mousemove",(function(){((arguments.length<=0?void 0:arguments[0])<0||(arguments.length<=0?void 0:arguments[0])>a.parent.canvas.width||(arguments.length<=1?void 0:arguments[1])<0||(arguments.length<=1?void 0:arguments[1])>a.parent.canvas.height)&&(n.onDrag=!1),n.onDrag&&(a.changePosition((arguments.length<=0?void 0:arguments[0])-i,(arguments.length<=1?void 0:arguments[1])-r),"function"==typeof e&&e(n))})),this.parent.attachEvent("mouseup",(function(e){n.onDrag&&(n.onDrag=!1,t&&t())})),this},q.object.prototype.hoverEvent=function(e,t){var a=this;this.mouseIn=!1;var n=this;return this.hoverEvents.push([e,t]),1===this.hoverEvents.length&&(this.enterCursorEvent(),this.parent.attachEvent("mousemove",(function(){if((arguments.length<=0?void 0:arguments[0])<0||(arguments.length<=0?void 0:arguments[0])>a.parent.canvas.width||(arguments.length<=1?void 0:arguments[1])<0||(arguments.length<=1?void 0:arguments[1])>a.parent.canvas.height){n.mouseIn=!1;var e,t=Object(I.a)(a.hoverEvents);try{for(t.s();!(e=t.n()).done;){var i=e.value;i[1]&&i[1]()}}catch(l){t.e(l)}finally{t.f()}}else{var r=n.pointInObject(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1]);if(n.mouseIn&&!r){n.mouseIn=!1;var o,s=Object(I.a)(a.hoverEvents);try{for(s.s();!(o=s.n()).done;){var c=o.value;c[1]&&c[1]()}}catch(l){s.e(l)}finally{s.f()}}}})),this.mouseMoveEvent.push((function(){if(!n.mouseIn){n.mouseIn=!0;var e,t=Object(I.a)(a.hoverEvents);try{for(t.s();!(e=t.n()).done;){var i=e.value;i[0]&&i[0]()}}catch(r){t.e(r)}finally{t.f()}}}))),this},q.object.prototype.attachQuickMovement=function(e,t,a){var n=!0,i=this;return document.addEventListener("keydown",(function(r){n&&-1!==q.inputReference.movementIndex.indexOf(r.key)&&(i.x+=q.inputReference.coeffIndex[q.inputReference.movementIndex.indexOf(r.key)][0]*e,i.y+=q.inputReference.coeffIndex[q.inputReference.movementIndex.indexOf(r.key)][1]*e,i.updateVisual(),a&&a(r,i),n=!1,setTimeout((function(){n=!0}),t))})),this},q.shape.prototype.pressedEvent=function(e){return this.enterCursorEvent(),this.mouseUpEvent.push(e),this},q.shape.prototype.hoverEvent=function(e,t){var a=this;this.mouseIn=!1;var n=this;return this.hoverEvents.push([e,t]),1===this.hoverEvents.length&&(this.enterCursorEvent(),this.parent.parent.attachEvent("mousemove",(function(){if(a.display)if((arguments.length<=0?void 0:arguments[0])<0||(arguments.length<=0?void 0:arguments[0])>a.parent.parent.canvas.width||(arguments.length<=1?void 0:arguments[1])<0||(arguments.length<=1?void 0:arguments[1])>a.parent.parent.canvas.height){n.mouseIn=!1;var e,t=Object(I.a)(a.hoverEvents);try{for(t.s();!(e=t.n()).done;){var i=e.value;i[1]&&i[1]()}}catch(l){t.e(l)}finally{t.f()}n.parent.updateVisual()}else{var r=n.pointInShape(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1]);if(n.mouseIn&&!r){n.mouseIn=!1;var o,s=Object(I.a)(a.hoverEvents);try{for(s.s();!(o=s.n()).done;){var c=o.value;c[1]&&c[1]()}}catch(l){s.e(l)}finally{s.f()}n.parent.updateVisual()}}})),this.mouseMoveEvent.push((function(){if(!n.mouseIn){n.mouseIn=!0;var e,t=Object(I.a)(a.hoverEvents);try{for(t.s();!(e=t.n()).done;){var i=e.value;i[0]&&i[0]()}}catch(r){t.e(r)}finally{t.f()}n.parent.updateVisual()}}))),this},q.app.prototype.animate=function(){if(void 0!==q.frameTime&&void 0!==q.lastFrame){var e=q.frameTime-q.lastFrame;this.objects.forEach((function(t){t.animate(e),t.shapes.forEach((function(t){t.animate(e)}))}))}};for(var J in q.animateFunctionReference={animate:function(e){var t=this;this.animations.forEach((function(a){var n=Object(u.a)(a,4),i=n[0],r=n[1],o=n[2],s=n[3],c=H(i,t)+e/s*(r-o);o<r&&c>r&&(c=r),o>r&&c<r&&(c=r),Q(i,t,c)}))},addAnimation:function(e,t,a,n){var i=this;this.animationCount++;var r=this.animationCount,o=setTimeout((function(){Q(e,i,t),i.cancelAnimation(r),void 0!==i.parent.static?i.parent.static=!0:i.static=!0,i.updateVisual?i.updateVisual():i.parent.updateVisual(),n&&n()}),a),s=this.animations.find((function(t){return t[0]===e}));return s&&this.cancelAnimation(s[6]),void 0!==this.parent.static?this.parent.static=!1:this.static=!1,this.animations.push([e,t,H(e,this),a,o,n,r]),this},cancelAnimation:function(){for(var e=this,t=function(){var t=n[a],i=e.animations.find((function(e){return e[6]===t})),r=e.animations.findIndex((function(e){return e[6]===t}));if(!i)return{v:!1};clearTimeout(i[4]),e.animations.splice(r,1)},a=0,n=Array.prototype.slice.call(arguments);a<n.length;a++){var i=t();if("object"===typeof i)return i.v}},fadeIn:function(e){var t=this;return new Promise((function(a){return t.addAnimation("opacity",1,e,a)}))},fadeOut:function(e){var t=this;return new Promise((function(a){return t.addAnimation("opacity",0,e,a)}))}},q.animateFunctionReference)q.object.prototype[J]=q.animateFunctionReference[J],q.shape.prototype[J]=q.animateFunctionReference[J];q.app.prototype.render=function(){this.clearCanvas(),this.fillBackground(),this.renderShape()},q.app.prototype.visualInit=function(){this.backgroundColor=this.options.background,this.context=this.canvas.getContext("2d")},q.app.prototype.renderShape=function(){this.renderPositions(),this.objects.sort((function(e,t){return e.zIndex-t.zIndex})).forEach((function(e){e.draw()}))},q.app.prototype.clearCanvas=function(){this.context.save(),this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.restore()},q.app.prototype.fillBackground=function(){"none"!==this.backgroundColor&&(this.context.save(),this.context.fillStyle=this.backgroundColor,this.context.fillRect(0,0,this.canvas.width,this.canvas.height),this.context.restore())},q.app.prototype.renderPositions=function(){var e=this;this.context.save(),this.context.fillStyle="red",this.objects.forEach((function(t){var a=t.posX,n=t.posY;t.positionIndicator&&(e.context.beginPath(),e.context.arc(a,n,5,0,2*Math.PI),e.context.closePath(),e.context.fill())})),this.context.restore()},q.object.prototype.updateVisual=function(){for(var e=this,t=this.findMax(),a=0;a<t.length;a++)if(~~(t[a]+.5)!==~~(this.preloader.maxes[a]+.5))return void this.createPreloader();this.clearPreloader(),this.shapes.forEach((function(t){var a=e.preloader.ox+t.x,n=e.preloader.oy+t.y;q.drawShape(e.preloader.context,a,n,t)})),this.parent.options.constantRender||this.parent.turnFunctions(this.parent)},q.object.prototype.clearPreloader=function(){this.preloader.context.clearRect(0,0,this.preloader.width,this.preloader.height)},q.object.prototype.createPreloader=function(){this.preloader=document.createElement("canvas"),this.preloader.maxes=this.findMax();var e=Object(u.a)(this.preloader.maxes,4),t=e[0],a=e[1],n=e[2],i=e[3];this.preloader.width=a-t,this.preloader.height=i-n,this.preloader.ox=this.posX-t,this.preloader.oy=this.posY-n,this.preloader.context=this.preloader.getContext("2d"),this.updateVisual()},q.object.prototype.drawPreloader=function(){if(this.display&&this.preloader.width>0&&this.preloader.height>0){var e=this.preloader.maxes[0]+this.preloader.width/2,t=this.preloader.maxes[2]+this.preloader.height/2;e=~~(e+.5),t=~~(t+.5),this.parent.context.save(),this.parent.context.translate(e,t),q.drawImg(this.parent.context,this.preloader,this.preloader.width,this.preloader.height),this.parent.context.restore()}},q.object.prototype.draw=function(){var e=this;if(this.display)return this.static?this.drawPreloader():void this.shapes.forEach((function(t){q.drawShape(e.parent.context,e.posX+t.x,e.posY+t.y,t)}))},q.drawShape=function(e,t,a,n){t=~~(t+.5),a=~~(a+.5),n.display&&(n.border||n.borderOnly?this.drawShapeKind(e,n,t,a,!0,1,n.borderColor,n.shadow):n.borderOnly||n.border||this.drawShapeKind(e,n,t,a,!1,n.opacity,n.color,n.shadow),n.borderOnly||this.drawShapeKind(e,n,t,a,!1,n.opacity,n.color))},q.drawShapeKind=function(e,t,a,n,i,r,o,s){if(!(0==(r*=t.parent.opacity)||r<0)){if(e.save(),e.globalAlpha=r,e.fillStyle=o,e.strokeStyle=o,e.lineWidth=t.borderWidth,e.translate(a,n),e.scale(t.scaleX,t.scaleY),s){var c=s.color,l=s.blur,d=s.offsetX,p=s.offsetY;e.shadowColor=c,e.shadowBlur=l,e.shadowOffsetX=d,e.shadowOffsetY=p}switch(t.kind){case"rect":q.drawRect(e,t.w,t.h,t.rotation,i);break;case"arc":q.drawArc(e,t.rad,t.arcDegree,t.rotation,i);break;case"text":q.drawText(e,t.text,t.font,i,t.textAlign,t.w,t.h,t.rotation);break;case"img":t.imageLoaded&&q.drawImg(e,t.sprite,t.w,t.h,t.rotation);break;case"poly":q.drawPoly(e,t.polyPoints,t.rotation,i);break;case"line":if(i){var h=t.points.map((function(e,a){var n=Object(u.a)(e,2),i=n[0],r=n[1];if(0===a){var o=G(W.apply(void 0,Object(C.a)(e).concat(Object(C.a)(t.points[a+1]))));return[i-t.borderWidth*Math.cos(o),r+t.borderWidth*Math.sin(o)]}if(a===t.points.length-1){var s=G(W.apply(void 0,Object(C.a)(e).concat(Object(C.a)(t.points[a-1]))));return[i-t.borderWidth*Math.cos(s),r+t.borderWidth*Math.sin(s)]}return[i,r]}));q.drawLine(e,h,t.rotation,t.lineWidth+t.borderWidth)}else q.drawLine(e,t.points,t.rotation,t.lineWidth);break;case"roundedRectangle":q.drawRoundedRectangle(e,t.w,t.h,t.rotation,t.borderRadius,i)}if(t.clip&&t.clipImageLoaded)if(e.clip(),e.rotate(G(t.rotation)),"number"===typeof t.clipSpriteSheetX&&"number"===typeof t.clipSpriteSheetY){var m=t.clipImage.width/t.spriteLengthX,f=t.clipImage.height/t.spriteLengthY,v=t.clipSpriteSheetX*m,b=t.clipSpriteSheetY*f;e.drawImage(t.clipImage,v,b,m,f,-t.width/2/t.scaleX,-t.height/2/t.scaleY,t.width/t.scaleX,t.height/t.scaleY)}else e.drawImage(t.clipImage,-t.width/2/t.scaleX,-t.height/2/t.scaleY,t.width/t.scaleX,t.height/t.scaleY);e.restore()}},q.drawRect=function(e,t,a,n,i){e.rotate(G(360-n)),i?e.strokeRect(-t/2,-a/2,t,a):e.fillRect(-t/2,-a/2,t,a)},q.drawRoundedRectangle=function(e,t,a,n,i,r){e.rotate(G(360)),e.beginPath(),e.moveTo(0,.5*-a),e.lineTo(.5*-t+i,.5*-a),e.quadraticCurveTo(.5*-t,.5*-a,.5*-t,.5*-a+i),e.lineTo(.5*-t,.5*a-i),e.quadraticCurveTo(.5*-t,.5*a,.5*-t+i,.5*a),e.lineTo(.5*t-i,.5*a),e.quadraticCurveTo(.5*t,.5*a,.5*t,.5*a-i),e.lineTo(.5*t,.5*-a+i),e.quadraticCurveTo(.5*t,.5*-a,.5*t-i,.5*-a),e.lineTo(0,.5*-a),e.closePath(),r?e.stroke():e.fill()},q.drawArc=function(e,t,a,n,i){e.beginPath();var r=G(360-n-a),o=G(360-n);if(a<360){var s=z(0,0,t,0,360-n-a),c=Object(u.a)(s,2),l=c[0],d=c[1];e.moveTo(l,d),e.moveTo(0,0)}e.arc(0,0,t,r,o),i?e.stroke():e.fill(),e.closePath()},q.drawText=function(e,t,a,n,i,r,o,s){var c;e.font=a,e.rotate(G(360-s)),c="center"===i?~~(-r/2+.5):"left"===i?0:~~(.5-r),n?e.strokeText(t,c,~~(o/3.5+.5)):e.fillText(t,c,~~(o/3.5+.5))},q.drawImg=function(e,t,a,n,i){e.rotate(G(360-i)),e.drawImage(t,-a/2,-n/2,a,n)},q.drawPoly=function(e,t,a,n){0!==t.length&&t&&(e.rotate(G(360-a)),e.beginPath(),e.moveTo.apply(e,Object(C.a)(t[0])),t.forEach((function(t){var a=Object(u.a)(t,2),n=a[0],i=a[1];return e.lineTo(n,i)})),e.closePath(),n?e.stroke():e.fill())},q.drawLine=function(e,t,a,n){e.beginPath(),e.rotate(G(360-a)),e.moveTo.apply(e,Object(C.a)(t[0])),t.forEach((function(t){var a=Object(u.a)(t,2),n=a[0],i=a[1];return e.lineTo(n,i)})),e.lineWidth=n,e.stroke()},q.object.prototype.addShape=function(e){var t=new q[e.kind](e,this);return this.updateVisual(),t},q.object.prototype.addComponent=function(e,t){var a=q.component.addComponent(e,t,this);return this.updateVisual(),a},q.app.prototype.addObject=function(e){return new q.object(e,this)},q.app.prototype.getObject=function(e){return this.objects.find((function(t){return t.name===e}))},q.app.prototype.addStorage=function(e){return new q.storage(e,this)},q.app.prototype.addAdvanceStorage=function(e){return new q.advanceStorage(e,this)},q.app.prototype.removeObject=function(e){this.objects.splice(this.objects.indexOf(e),1)};var K=q,$=!1,Z=function(){if(!$){$=!0;K.addClass("shadow",{shadow:{color:"black",offsetX:3,offsetY:-3,blur:7}}),K.addComponent({name:"Card",kind:"roundedRectangle",borderOnly:!0,color:"white",w:205,h:291,clip:!0,borderRadius:40,border:!0,borderWidth:2.5,borderColor:"black",shadow:{color:"black",blur:2.5,offsetX:3.5,offSetY:3.5}}),K.addComponent({kind:"text",color:"black",fontFamily:"Arial Bold",name:"text"}),K.addComponent({name:"textBackground",kind:"roundedRectangle",color:"#ffffed",border:!0,borderWidth:10,borderColor:"black",borderRadius:20,class:"shadow"}),K.addComponent({name:"turnIndicator",kind:"poly",specialPolygon:!0,numberOfSide:3,color:"yellow",radius:20}),K.addComponent({name:"handCard",kind:"roundedRectangle",borderOnly:!0,color:"white",w:246,h:349.2,clip:!0,borderRadius:40,border:!0,borderWidth:2.5,borderColor:"black",shadow:{color:"black",blur:2.5,offsetX:3.5,offSetY:3.5}}),K.addComponent({name:"deckCard",kind:"roundedRectangle",color:"white",w:205,h:291,borderRadius:40,border:!0,borderWidth:2.5,borderColor:"black"})}},ee="https://upload.wikimedia.org/wikipedia/commons/9/95/UNO_cards_deck.svg",te=function(){function e(t,a,n){var i=this;Object(A.a)(this,e),this.drawSoundIcon=function(){var e=i.app.addObject({x:1600,y:100,name:"sound"}),t=e.addShape({kind:"img",drawWidth:70,spriteLink:"./assets/soundon.png",display:!0}),a=e.addShape({kind:"img",drawWidth:70,spriteLink:"./assets/soundoff.png",display:!1}),n=!0;e.pressedEvent((function(){n?K.muteAll():K.unmuteAll(),t.display=!t.display,a.display=!a.display,e.updateVisual(),n=!n}))},this.animatePlayerPlay=function(e){return new Promise((function(t){return i.addToAnimationQueue(["play"].concat(Object(C.a)(i.positionReference.playerDeck),[e]),t)}))},this.animatePlayerDraw=function(){return new Promise((function(e){return i.addToAnimationQueue(["draw"].concat(Object(C.a)(i.positionReference.playerDeck)),e)}))},this.animateLeaderboardDraw=function(){return new Promise((function(e){return i.addToAnimationQueue(["draw"].concat(Object(C.a)(i.positionReference.leaderBoard)),e)}))},this.animateLeaderboardPlay=function(e){return new Promise((function(t){return i.addToAnimationQueue(["play"].concat(Object(C.a)(i.positionReference.leaderBoard),[e]),t)}))},this.drawSpecialInfo=function(){var e=i.app.addObject({x:i.positionReference.playDeck[0],y:i.positionReference.playDeck[1]+170});e.addShape({kind:"roundedRectangle",display:!1,w:i.app.canvas.width,h:100});var t=e.addShape({kind:"text",font:"40px Arial Bold",text:""}),a=["red","blue","yellow","green"],n=["red","blue","#9b870c","green"];i.activateInfo=function(i){console.log(i);var r=n[a.indexOf(i)];t.color=r,t.text=i.split("").map((function(e,t){return 0===t?e.toUpperCase():e})).join(""),e.updateVisual()},i.cancelInfo=function(){t.text="",e.updateVisual()}},this.animateDraw=function(e,t){return new Promise((function(a){var n=i.createCard(null,!0);n.x=i.positionReference.drawDeck[0],n.y=i.positionReference.drawDeck[1],n.zIndex=-1,n.display=!0,K.playSound("./assets/draw.mp3"),n.addAnimation("x",e,500),n.addAnimation("y",t,500),n.shapes[0].addAnimation("scaleX",.2,500,a),n.shapes[0].addAnimation("scaleY",.2,500,(function(){return n.kill()}))}))},this.animatePlay=function(e,t,a){return new Promise((function(n){var r=i.createCard(e);r.shapes[0].scaleX=.2,r.shapes[0].scaleY=.2,r.x=t,r.y=a,r.display=!0,K.playSound("./assets/deal.mp3"),r.addAnimation("x",i.playDeck.x,500,(function(){i.playDeck.kill(),i.playDeck=r})).addAnimation("y",i.playDeck.y,500,n),r.shapes[0].addAnimation("scaleX",1,500).addAnimation("scaleY",1,500),e.match(/Draw 4/)||e.match(/Wild/)?i.activateInfo(e.split(" ")[0]):i.cancelInfo()}))},this.drawColorChoser=function(){var e=["red","blue","#9b870c","green"],t=!1,a=function(){},n=i.app.addStorage({name:"Color Chooser",display:!1,zIndex:1e3,x:"50%",y:i.app.canvas.height/2-100,model:["red","blue","yellow","green"],spacing:25,direction:"column"});n.addComponent("textBackground",{w:400,h:400}),n.addComponent("text",{fontSize:35,text:"Choose a color:",y:-170}),n.elementFunction=function(i,r){var o=n.addComponent("text",{color:e[r],fontSize:30,text:i.split("").map((function(e,t){return 0===t?e.toUpperCase():e})).join("")});return o.hoverEvent((function(){o.color="yellow",n.updateVisual()}),(function(){o.color=e[r],n.updateVisual()})),o.pressedEvent((function(){t&&(a(i),n.display=!1)})),o},n.updateToModel(),i.chooseColor=function(){return new Promise((function(e){n.display=!0,t=!0,a=e}))}},this.kill=function(){i.app.kill(),i.staticApp.kill(),K.stopAll()},Z(),this.cardSpriteColumn=14,this.cardSpriteRow=8,this.cardSpriteReference={wild:[0,13],Draw4:[4,13],colorReference:["red","yellow","green","blue"],otherReference:["Skip","Reverse","Draw 2"]};var r=function(e,t){var a=new K.app(e,t);return a.pixelDensity=2,a.canvas.width=1700,a.canvas.height=1300,a.backgroundColor="none",a};this.app=r(t),this.staticApp=r(a,{constantRender:!1}),this.staticApp.addObject({x:this.app.canvas.width/2,y:this.app.canvas.height/2,zIndex:-10}).addShape({kind:"roundedRectangle",w:this.app.canvas.width,h:this.app.canvas.height,clip:!0,clipImageLink:"assets/wood.jpg"}),this.staticApp.turnFunctions(this.staticApp),this.yRow=.4*this.app.canvas.height,this.positionReference={leaderBoard:[.85*this.app.canvas.width,this.yRow],drawDeck:[.38*this.app.canvas.width,this.yRow],playDeck:[.62*this.app.canvas.width,this.yRow],actionPanel:[.15*this.app.canvas.width,this.yRow],playerDeck:[this.app.canvas.width/2,this.app.canvas.height-75]};var o=!1,s=function(){};this.drawDeck=this.createDeck.apply(this,["blue 2"].concat(Object(C.a)(this.positionReference.drawDeck))),this.drawDeck.name="drawDeck",this.drawDeck.addComponent("text",{text:"Draw Here",y:170,fontSize:35}),this.drawDeck.flip(),this.drawDeck.pressedEvent((function(){o&&(o=!1,s())})),this.awaitDraw=function(){return new Promise((function(e){o=!0,s=e}))},this.cancelDraw=function(){return o=!1},this.createHand(),this.createLeaderboard(),this.drawAnnouncement(),this.configureStartGameMessage(),this.configureUnoMessage(),this.drawColorChoser(),this.drawSpecialInfo(),this.drawEmote(),this.drawEndGame(),this.drawSoundIcon(),this.initAnimation()}return Object(R.a)(e,[{key:"initiateWithGameMode",value:function(e){this.drawAddBot(e)}},{key:"createPlayDeck",value:function(e){this.playDeck=this.createDeck.apply(this,[e].concat(Object(C.a)(this.positionReference.playDeck))),this.playDeck.name="playDeck"}},{key:"drawEndGame",value:function(){var e=this.app.addObject({display:!1,x:this.app.canvas.width/2,y:this.app.canvas.height/2-100,zIndex:1e8});e.addComponent("textBackground",{w:700,h:200});var t=e.addComponent("text",{text:"Someone has won the game!",fontSize:40,y:-10}),a=function(){},n=e.addComponent("text",{text:"",fontSize:20,y:40,color:"grey"}),i=e.addShape({kind:"text",text:"New Game",font:"30px Arial Bold",color:"blue",y:70});i.hoverEvent((function(){i.color="yellow",e.updateVisual()}),(function(){i.color="blue",e.updateVisual()})).pressedEvent((function(){return a()})),this.activateEndGame=function(i,r,o){t.text="\ud83c\udf89 ".concat(i," has won the game! \ud83c\udf89"),o&&(n.text="You has gained ".concat(o," points!")),e.updateVisual(),e.display=!0,a=r}}},{key:"drawTutorial",value:function(e){var t=this.app.addAdvanceStorage({display:!1,alignX:!0,alignDirectionX:"center",alignY:!0,alignDirectionY:"center",alignMarginX:0,alignMarginY:-100,zIndex:1e5,direction:"column",spacing:5,paddingTop:20,paddingBottom:20,paddingLeft:20,paddingRight:20});t.backgroundFunction=function(){return t.addComponent("textBackground",{})},t.addShape({kind:"img",spriteLink:"assets/crossIcon.png",drawWidth:50,x:320,y:-320}).pressedEvent((function(){return t.display=!1})),t.model=["\ud83c\udf89 Welcome to One Online! \ud83c\udf89","Some quick pointers:",'\ud83d\udc48 Use "Copy Link" from the left to automatically',"get a link you can send to your friends!","\ud83d\udc49 You can start the game when at least 2 players ","(including bots) are present. The panel on the left","show you who is in the game.","\ud83d\udc47 You can use the emote panel below to piss","off your friends when playing.","\ud83d\udc4f And that is it! If you have any feedback","please \ud83d\udce7 me at vietlongali@gmail.com","Have fun!","Love this app? Buy me a beer on ","Venmo @LongTran123"],t.elementFunction=function(e){var a=t.addComponent("text",{fontSize:30,text:e,textAlign:"left"});return a.x=-340,a},t.updateToModel(),this.showTutorial="Casual"===e?function(){return t.display=!0}:function(){}}},{key:"drawAddBot",value:function(e){var t=this.app.addObject({display:!1,x:this.positionReference.leaderBoard[0],y:this.positionReference.leaderBoard[1]+240}),a=t.addShape({kind:"text",font:"35px Arial Bold",text:"Add Bot \ud83e\udd16"}),n=function(){};a.hoverEvent((function(){a.color="yellow",t.updateVisual()}),(function(){a.color="black",t.updateVisual()})).pressedEvent((function(){return n()})),this.startAddBot="Competitive Player"===e?function(){}:function(e){n=e,t.display=!0},this.cancelAddBot=function(){t.display=!1}}},{key:"drawEmoteChooser",value:function(e){var t=this.app.addStorage({x:500,y:940,spacing:-15,zIndex:-1});t.addComponent("textBackground",{color:"white",w:740,h:80}),t.model=["Emote:","\ud83d\udc96","\ud83d\ude21","\ud83d\udc4b","\ud83d\ude02","\ud83d\ude08","\ud83d\udca9"],t.elementFunction=function(a,n){if(!n)return t.addShape({kind:"text",text:a,fontSize:35,fontFamily:"Arial Bold"});var i=t.addShape({kind:"text",text:a,fontSize:30,fontFamily:"Arial Bold"});return i.hoverEvent((function(){i.fontSize=50,t.updateVisual()}),(function(){i.fontSize=30,t.updateVisual()})).pressedEvent((function(){return e(a)})),i},t.updateToModel()}},{key:"drawEmote",value:function(){var e=this.app.addObject({display:!1,x:this.app.canvas.width/2,y:this.app.canvas.height/2-340,zIndex:1e3}),t=e.addShape({kind:"text",text:"Someone emote something",font:"60px Arial Bold",color:"green"});e.addShape({kind:"roundedRectangle",w:this.app.canvas.width,h:100,display:!1});var a=null;this.emote=function(n,i,r){clearInterval(a),t.text="".concat(n," emote ").concat(r),t.color=i,e.updateVisual(),e.display=!0,t.opacity=0,t.addAnimation("opacity",1,100,(function(){a=setTimeout((function(){t.addAnimation("opacity",0,100,(function(){e.display=!1}))}),1e3)}))}}},{key:"initAnimation",value:function(){var e=this;this.animationQueue=[],this.animationCallback=[];var t=!1;this.updateAnimation=Object(l.a)(c.a.mark((function a(){var n,i,r,o,s,l;return c.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!t){a.next=2;break}return a.abrupt("return");case 2:if(e.animationQueue.length){a.next=4;break}return a.abrupt("return");case 4:if(t=!0,n=Object(u.a)(e.animationQueue.splice(0,1)[0],4),i=n[0],r=n[1],o=n[2],s=n[3],l=e.animationCallback.splice(0,1)[0],"play"!==i){a.next=15;break}return a.next=10,e.animatePlay(s,r,o);case 10:t=!1,l(),e.updateAnimation(),a.next=20;break;case 15:return a.next=17,e.animateDraw(r,o);case 17:t=!1,l(),e.updateAnimation();case 20:case"end":return a.stop()}}),a)}))),this.addToAnimationQueue=function(t,a){e.animationQueue.push(t),e.animationCallback.push(a),e.updateAnimation()}}},{key:"createActionPanel",value:function(e,t){var a=this.app.addStorage({x:this.positionReference.actionPanel[0],y:this.positionReference.actionPanel[1],name:"actionPanel",spacing:20,direction:"column"});a.addComponent("textBackground",{w:240,h:300}),a.addComponent("text",{fontSize:32,text:"Actions:",y:-120}),a.model="Casual"===t?["Copy Link","Leave Game","Restart Game"]:["Leave Game"],a.elementFunction=function(t){var n=a.addComponent("text",{fontSize:30,text:t});return n.hoverEvent((function(){n.color="yellow",a.updateVisual()}),(function(){n.color="black",a.updateVisual()})).pressedEvent((function(){return e[t.split(" ").join("")]()})),n},a.updateToModel()}},{key:"createLeaderboard",value:function(){var e=this,t=this.staticApp.addStorage({x:this.positionReference.leaderBoard[0],y:this.positionReference.leaderBoard[1],spacing:30,direction:"column",name:"leaderBoard"});t.addComponent("textBackground",{w:300,h:400}),t.addComponent("text",{fontSize:32,text:"Turn Board:",y:-160});var a=this.app.addObject({display:!1});a.addComponent("turnIndicator",{x:170,rotation:180});var n=["green","red","darkyellow","blue"];t.elementFunction=function(e,a){return t.addComponent("text",{fontSize:30,color:n[a],text:e})},this.updateTurnIndicator=function(e){var n=t.shapes[e+2],i=n.absoluteY,r=n.absoluteX;a.x=r+20,a.addAnimation("y",i,200,(function(){a.display=!0;var e=5,t=function(){--e<0||a.addAnimation("opacity",0,500,n)},n=function(){return a.addAnimation("opacity",1,500,t)};t()}))};var i=[];this.updateLeaderboard=function(a,n,r){i.forEach((function(e){return e.kill()})),i=[],t.model=a,t.updateToModel(),t.storageShapes.forEach((function(e,a){var o=e.x,s=e.y;i.push(t.addComponent("text",{text:"Cards: ".concat(n[a]," ").concat("number"===typeof r[a]?"Point: "+r[a]:""),x:o,y:s+30,color:"grey",fontSize:20}))})),e.staticApp.turnFunctions(e.staticApp)}}},{key:"createHand",value:function(){var e=this,t=function(){},a=function(){},n=!1,i=this.app.addStorage({name:"Hand",spacing:-140,y:this.app.canvas.height-75,x:"50%"});i.addShape({kind:"rect",color:"brown",w:this.app.canvas.width,h:150}),i.elementFunction=function(r){var o=[];if(r.match(/Wild/))o=e.cardSpriteReference.wild;else if(r.match(/Draw 4/))o=e.cardSpriteReference.Draw4;else{var s=r.split(" ")[0],c=r.split(" ").slice(1).join(" ");o[0]=e.cardSpriteReference.colorReference.indexOf(s),parseInt(c)?o[1]=parseInt(c):o[1]=e.cardSpriteReference.otherReference.indexOf(c)+10}var l=i.addComponent("handCard",{borderOnly:!0,y:30,clipSpriteSheetX:o[1],clipSpriteSheetY:o[0],spriteLengthX:e.cardSpriteColumn,spriteLengthY:e.cardSpriteRow,clipImageLink:ee});return l.hoverEvent((function(){a(r)&&n&&(l.borderColor="yellow"),l.borderWidth=10,l.addAnimation("y",-100,200)}),(function(){l.borderColor="black",l.borderWidth=2.5,l.addAnimation("y",30,200)})).pressedEvent((function(){a(r)&&n&&(n=!1,l.kill(),t(r))})),l},this.updateCards=function(e){i.model=e,i.updateToModel()},this.awaitSelection=function(e){return new Promise((function(i){a=e,t=i,n=!0}))},this.cancelSelection=function(){return n=!1}}},{key:"createDeck",value:function(e,t,a){var n=this.staticApp.addObject({x:t,y:a});n.addComponent("deckCard",{x:12,y:-10}),n.addComponent("deckCard",{x:8,y:-7.5}),n.addComponent("deckCard",{x:6,y:-5}),n.addComponent("deckCard",{x:3,y:-2.5});var i=this.createCard(e);return i.x=t,i.y=a,i.shapes[0].shadow=null,i.shapes[0].border=!1,i.display=!0,i.updateVisual(),this.staticApp.turnFunctions(this.staticApp),i}},{key:"createCard",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=this.app.addObject({x:"50%",y:"50%",display:!1});if(t)a.addComponent("Card",{clipImageLink:"assets/back.svg"});else{var n=!1,i=[];if(e.match(/Wild/))i=this.cardSpriteReference.wild;else if(e.match(/Draw 4/))i=this.cardSpriteReference.Draw4;else{var r=e.split(" ")[0],o=e.split(" ").slice(1).join(" ");i[0]=this.cardSpriteReference.colorReference.indexOf(r),parseInt(o)?i[1]=parseInt(o):i[1]=this.cardSpriteReference.otherReference.indexOf(o)+10}var s=a.addComponent("Card",{clipSpriteSheetX:i[1],clipSpriteSheetY:i[0],spriteLengthX:this.cardSpriteColumn,spriteLengthY:this.cardSpriteRow,clip:!0,clipImageLink:ee}),c=function(){s.clipSpriteSheetX=null,s.changeClipImage("assets/back.svg")},l=function(){s.clipSpriteSheetX=i[1],s.changeClipImage(ee)},u=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return new Promise((function(t){s.addAnimation("scaleX",0,100,(function(){e?c():l(),s.addAnimation("scaleX",1,100,t)}))}))};a.flip=function(){return u(n=!n)}}return a}},{key:"drawAnnouncement",value:function(){var e=this;this.announcementQueue=[],this.announcmentPerpetual=[],this.announcement=this.app.addObject({x:"50%",y:100,name:"Announcement"}),this.annoucementText=this.announcement.addComponent("text",{fontSize:70,text:"",display:!1}),this.announcement.addShape({kind:"roundedRectangle",w:this.app.canvas.width/2,h:200,display:!1});var t=function(t,a){return function(t){return e.annoucementText.addAnimation("opacity",0,100,(function(){e.annoucementText.display=!1,t&&t()}))}((function(){t(),e.annoucementText.display=!0,function(t){e.annoucementText.addAnimation("opacity",1,100,t)}(a)}))};this.updateAnnouncement=function(){if(e.announcementQueue.length>0&&!e.announcementQueue[0][3]){var a=Object(u.a)(e.announcementQueue[0],3),n=a[0],i=a[1],r=a[2];t((function(){e.annoucementText.text=n,e.annoucementText.color=i,setTimeout((function(){e.announcementQueue.splice(0,1),e.updateAnnouncement()}),r+100)})),e.announcementQueue[0][3]=!0}}}},{key:"addToAnnoucementQueue",value:function(e,t,a){this.announcementQueue.push([e,t,a,!1]),this.updateAnnouncement()}},{key:"configureUnoMessage",value:function(){var e=this.app.addObject({x:this.app.canvas.width/2,y:this.app.canvas.height/2,zIndex:1e3,name:"One"}),t=e.addShape({kind:"img",spriteLink:"./assets/polygon.svg",scaleX:0,scaleY:0,drawWidth:500});e.display=!1,this.UNO=function(){e.display=!0,t.addAnimation("scaleX",1.5,400,(function(){setTimeout((function(){t.addAnimation("scaleX",0,100,(function(){return e.display=!1})),t.addAnimation("scaleY",0,100)}),500)})),t.addAnimation("scaleY",1.5,400)}}},{key:"configureStartGameMessage",value:function(){var e=this.app.addObject({x:"50%",y:this.app.canvas.height-200,display:!1}),t=e.addComponent("text",{text:"Start Game",fontSize:50});e.addShape({kind:"roundedRectangle",w:200,h:100,display:!1});var a=!1,n=function(){},i=function(){a?t.addAnimation("opacity",1,1e3,r):t.opacity=1},r=function(){a?t.addAnimation("opacity",0,1e3,i):t.opacity=1};e.pressedEvent((function(){a=!1,e.display=!1,n()})),this.initiateStartGameMessage=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};a||(n=t,a=!0,e.display=!0,r())},this.turnOffStartGameMessage=function(){e.display=!1}}}]),e}(),ae="https://upload.wikimedia.org/wikipedia/commons/9/95/UNO_cards_deck.svg",ne=function(){function e(t,a,n){var i=this;Object(A.a)(this,e),this.createPlayDeck=function(e){i.playDeck=i.createDeck.apply(i,[e].concat(Object(C.a)(i.positionReference.playDeck)))},this.drawSoundIcon=function(){var e=i.app.addObject({x:100,y:i.app.canvas.height/2+160}),t=e.addShape({kind:"img",drawWidth:70,spriteLink:"./assets/soundon.png",display:!0}),a=e.addShape({kind:"img",drawWidth:70,spriteLink:"./assets/soundoff.png",display:!1}),n=!0;e.pressedEvent((function(){n?K.muteAll():K.unmuteAll(),t.display=!t.display,a.display=!a.display,e.updateVisual(),n=!n}))},this.animatePlayerPlay=function(e){return i.animatePlay.apply(i,[e].concat(Object(C.a)(i.positionReference.playerDeck)))},this.animatePlayerDraw=function(){return i.animateDraw.apply(i,Object(C.a)(i.positionReference.playerDeck))},this.animateLeaderboardDraw=function(){return i.animateDraw.apply(i,Object(C.a)(i.positionReference.leaderBoard))},this.animateLeaderboardPlay=function(e){return i.animatePlay.apply(i,[e].concat(Object(C.a)(i.positionReference.leaderBoard)))},this.drawSpecialInfo=function(){var e=i.app.addObject({x:i.positionReference.playDeck[0],y:i.positionReference.playDeck[1]+170}),t=e.addComponent("text",{fontSize:40,text:""}),a=["red","blue","yellow","green"],n=["red","blue","#9b870c","green"];i.activateInfo=function(i){console.log(i);var r=n[a.indexOf(i)];t.color=r,t.text=i.split("").map((function(e,t){return 0===t?e.toUpperCase():e})).join(""),e.updateVisual()},i.cancelInfo=function(){t.text="",e.updateVisual()}},this.animateDraw=function(e,t){return new Promise((function(a){var n=i.createCard(null,!0);n.x=i.positionReference.drawDeck[0],n.y=i.positionReference.drawDeck[1],n.zIndex=-1,n.display=!0,K.playSound("./assets/draw.mp3"),n.addAnimation("x",e,500),n.addAnimation("y",t,500),n.shapes[0].addAnimation("scaleX",.2,500,a),n.shapes[0].addAnimation("scaleY",.2,500,(function(){return n.kill()}))}))},this.animatePlay=function(e,t,a){return new Promise((function(n){var r=i.createCard(e);r.shapes[0].scaleX=.2,r.shapes[0].scaleY=.2,r.x=t,r.y=a,r.display=!0,K.playSound("./assets/deal.mp3"),r.addAnimation("x",i.playDeck.x,500,(function(){i.playDeck.kill(),i.playDeck=r})),r.addAnimation("y",i.playDeck.y,500,n),r.shapes[0].addAnimation("scaleX",1,500),r.shapes[0].addAnimation("scaleY",1,500),e.match(/Draw 4/)||e.match(/Wild/)?i.activateInfo(e.split(" ")[0]):i.cancelInfo()}))},this.drawColorChoser=function(){var e=["red","blue","yellow","green"],t=["red","blue","#9b870c","green"],a=!1,n=function(){},r=i.app.addStorage({display:!1,zIndex:1e3,x:i.app.canvas.width/2,y:i.app.canvas.height/2,model:e,spacing:25,direction:"column"});r.addShape({kind:"roundedRectangle",w:600,h:600,borderRadius:20,color:"white",shadow:{color:"black",offsetX:5,offsetY:-5,blur:10},border:!0,borderWidth:5,borderColor:"black"}),r.addShape({kind:"text",font:"35px Futura",text:"Choose a color:",y:-210}),r.elementFunction=function(e,t){var i=r.addShape({kind:"roundedRectangle",w:250,h:50,color:"white"});return i.pressedEvent((function(){a&&(n(e),r.display=!1)})),i},r.updateToModel(),r.storageShapes.forEach((function(a,n){var i=a.x,o=a.y,s=e[n];r.addShape({x:i,y:o,kind:"text",color:t[n],font:"45px Futura",text:s.split("").map((function(e,t){return 0===t?e.toUpperCase():e})).join("")})})),i.chooseColor=function(){return new Promise((function(e){r.display=!0,a=!0,n=e}))}},this.kill=function(){i.app.kill(),i.staticApp.kill(),K.stopAll()},Z(),this.cardSpriteColumn=14,this.cardSpriteRow=8,this.cardSpriteReference={wild:[0,13],Draw4:[4,13],colorReference:["red","yellow","green","blue"],otherReference:["Skip","Reverse","Draw 2"]};var r=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=new K.app(e,t);return a.backgroundColor="none",a.pixelDensity=2,a};this.app=r(t),this.staticApp=r(a,{constantRender:!1}),this.cardApp=r(n);var o=function(){return Math.max(window.innerWidth)},s=function(){return Math.max(window.innerHeight)};this.app.canvas.width=2*o(),this.app.canvas.height=2*s(),this.staticApp.canvas.width=2*o(),this.staticApp.canvas.height=2*s(),this.staticApp.addObject({x:this.app.canvas.width/2,y:this.app.canvas.height/2,zIndex:-10}).addShape({kind:"roundedRectangle",w:this.app.canvas.width,h:this.app.canvas.height,clip:!0,clipImageLink:"assets/woodMobile.jpg"}),this.staticApp.turnFunctions(this.staticApp),this.positionReference={leaderBoard:[this.app.canvas.width/2,75],drawDeck:[this.app.canvas.width/2+200,this.app.canvas.height/2-80],playDeck:[this.app.canvas.width/2-200,this.app.canvas.height/2-80],playerDeck:[this.app.canvas.width/2,this.app.canvas.height-75]};var c=!1,l=function(){};this.drawDeck=this.createDeck.apply(this,["blue 2"].concat(Object(C.a)(this.positionReference.drawDeck))),this.drawDeck.addComponent("text",{text:"Draw Here",y:170,fontSize:35}),this.drawDeck.flip(),this.drawDeck.pressedEvent((function(){c&&(c=!1,l())})),this.awaitDraw=function(){return new Promise((function(e){c=!0,l=e}))},this.cancelDraw=function(){return c=!1},this.createHand(),this.createLeaderboard(),this.drawAnnouncement(),this.configureStartGameMessage(),this.configureUnoMessage(),this.createActionPanel(),this.drawColorChoser(),this.drawSpecialInfo(),this.drawEndGame(),this.drawSoundIcon()}return Object(R.a)(e,[{key:"initiateWithGameMode",value:function(e){this.drawAddBot(e)}},{key:"drawEndGame",value:function(){var e=this.app.addObject({display:!1,x:this.app.canvas.width/2,y:this.app.canvas.height/2-100,zIndex:1e8});e.addComponent("textBackground",{w:700,h:400});var t=e.addComponent("text",{text:"Someone has won the game!",fontSize:50,y:-20}),a=e.addComponent("text",{text:"",fontSize:30,y:30}),n=function(){},i=e.addComponent("text",{text:"New Game",fontSize:40,color:"blue",y:80});i.hoverEvent((function(){i.color="yellow",e.updateVisual()}),(function(){i.color="blue",e.updateVisual()})),i.pressedEvent((function(){return n()})),this.activateEndGame=function(i,r,o){t.text="\ud83c\udf89 ".concat(i," has won the game! \ud83c\udf89"),o&&(a.text="You has gained ".concat(o," points!")),e.updateVisual(),e.display=!0,n=r}}},{key:"drawTutorial",value:function(){this.showTutorial=function(){}}},{key:"drawAddBot",value:function(e){var t=this.app.addObject({display:!1,x:this.positionReference.leaderBoard[0],y:this.positionReference.leaderBoard[1]+110}),a=t.addComponent("text",{fontSize:35,text:"Add Bot \ud83e\udd16"}),n=function(){};a.hoverEvent((function(){a.color="yellow",t.updateVisual()}),(function(){a.color="black",t.updateVisual()})),a.pressedEvent((function(){return n()})),this.startAddBot="Competitive Player"===e?function(){}:function(e){n=e,t.display=!0},this.cancelAddBot=function(){t.display=!1}}},{key:"drawEmoteChooser",value:function(e){}},{key:"createActionPanel",value:function(e,t){var a=this.app.addStorage({x:this.app.canvas.width/2,y:this.app.canvas.height/2+240,spacing:100});a.addShape({kind:"roundedRectangle",display:!1,w:this.app.canvas.width,h:300,borderRadius:20,color:"#ffffed",shadow:{color:"black",offsetX:5,offsetY:-5,blur:10},border:!0,borderWidth:5,borderColor:"black"}),a.addShape({kind:"text",font:"40px Futura",text:"Actions:",y:-80}),a.model="Casual"===t?["Copy Link","Leave Game","Restart Game"]:["Leave Game"],a.elementFunction=function(t){var n=a.addShape({kind:"text",font:"35px Futura",text:t});return n.hoverEvent((function(){n.color="yellow",a.updateVisual()}),(function(){n.color="black",a.updateVisual()})),n.pressedEvent((function(){return e[t.split(" ").join("")]()})),n},a.updateToModel()}},{key:"createLeaderboard",value:function(){var e=this,t=this.app.addStorage({x:this.app.canvas.width/2,y:75,spacing:0}),a=this.app.addObject({display:!1});a.addShape({y:120,kind:"poly",specialPolygon:!0,numberOfSide:3,color:"yellow",radius:14,rotation:90,border:!0,borderColor:"black",borderWidth:7});var n=["#90ee90","#ee2400","#D3D3D3","#00FFFF"];t.elementFunction=function(a,i){return t.addShape({kind:"rect",color:n[i],w:e.app.canvas.width/4,h:150,border:!0,borderColor:"black",borderWidth:5,shadow:{blur:7,color:"black",offsetY:5}})},t.model=["text1","test2","txt2","t34"],t.updateToModel();var i=[],r=[];this.updateLeaderboard=function(a,n,o){t.model=a,t.updateToModel(),i.forEach((function(e){return e.kill()})),i=[],r.forEach((function(e){return e.kill()})),r=[],a.forEach((function(e,a){var n=t.storageShapes[a],r=n.x,o=n.y,s=t.addShape({kind:"text",text:e,x:r,y:o-20,font:"30px Arial Bold",color:"black"});i.push(s)})),n.forEach((function(e,a){var n=t.storageShapes[a],r=n.x,s=n.y,c="number"==typeof o[a]?"Point: ".concat(o[a]):"",l=t.addShape({kind:"text",text:"Cards: ".concat(e," ").concat(c),x:r,y:s+5,font:"18px Arial Bold",color:"black"});i.push(l)})),e.staticApp.turnFunctions(e.staticApp)};var o=null;this.emote=function(e,a,n){clearTimeout(o);var r=i.find((function(t){return t.text===e}));r.addAnimation("opacity",0,100,(function(){r.text=n,r.font="40px Arial Bold",t.updateVisual(),r.addAnimation("opacity",1,100,(function(){o=setTimeout((function(){r.addAnimation("opacity",0,100,(function(){r.text=e,r.font="30px Arial Bold",t.updateVisual(),r.addAnimation("opacity",1,100)}))}),1500)}))}))},this.updateTurnIndicator=function(e){var n=t.shapes[e],i=(n.absoluteY,n.absoluteX);a.addAnimation("x",i,200,(function(){a.display=!0;var e=5,t=function(){--e<0||a.addAnimation("opacity",0,500,n)},n=function(){return a.addAnimation("opacity",1,500,t)};t()}))}}},{key:"createHand",value:function(){var e=this,t=function(){},a=function(){},n=!1,i=this.cardApp.addStorage({spacing:-140,y:0});i.elementFunction=function(r){var o=[];if(r.match(/Wild/))o=e.cardSpriteReference.wild;else if(r.match(/Draw 4/))o=e.cardSpriteReference.Draw4;else{var s=r.split(" ")[0],c=r.split(" ").slice(1).join(" ");o[0]=e.cardSpriteReference.colorReference.indexOf(s),parseInt(c)?o[1]=parseInt(c):o[1]=e.cardSpriteReference.otherReference.indexOf(c)+10}var l=i.addShape({y:-74,borderOnly:!0,clipSpriteSheetX:o[1],clipSpriteSheetY:o[0],spriteLengthX:e.cardSpriteColumn,spriteLengthY:e.cardSpriteRow,kind:"roundedRectangle",color:"white",w:246,h:349.2,clip:!0,clipImageLink:ae,borderRadius:40,border:!0,borderWidth:2.5,borderColor:"black"});return l.pressedEvent((function(e,i){a(r)&&n&&(i<100||(n=!1,l.kill(),t(r)))})),l},this.updateCards=function(t){i.model=t,e.cardApp.canvas.width=i.totalLength+300,e.cardApp.canvas.style.width="".concat((i.totalLength+300)/2,"px"),i.x=e.cardApp.canvas.width/2;e.cardApp.canvas.height=254.6,i.y=254.6;var a=.5*window.innerWidth,n=(i.totalLength+300)/2*.5;n<a&&(e.cardApp.canvas.style.left="".concat(a-n,"px")),n>a&&(e.cardApp.canvas.style.left="0px",document.getElementById("scrollable").scrollLeft=n-a),i.updateToModel()},this.awaitSelection=function(e){return new Promise((function(i){a=e,t=i,n=!0}))},this.cancelSelection=function(){return n=!1}}},{key:"createDeck",value:function(e,t,a){var n={kind:"roundedRectangle",color:"white",w:205,h:291,borderRadius:40,border:!0,borderWidth:2.5,borderColor:"black"},i=this.staticApp.addObject({x:t,y:a});i.addShape(Object(m.a)({x:12,y:-10},n)),i.addShape(Object(m.a)({x:8,y:-7.5},n)),i.addShape(Object(m.a)({x:6,y:-5},n)),i.addShape(Object(m.a)({x:3,y:-2.5},n));var r=this.createCard(e);return r.x=t,r.y=a,r.shapes[0].shadow=null,r.shapes[0].border=!1,r.display=!0,r.updateVisual(),this.staticApp.turnFunctions(this.staticApp),r}},{key:"createCard",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=this.app.addObject({x:this.app.canvas.width/2,y:this.app.canvas.height/2,display:!1});if(t)a.addShape({kind:"roundedRectangle",borderOnly:!0,color:"white",w:205,h:291,clip:!0,clipImageLink:"assets/back.svg",borderRadius:40,border:!0,borderWidth:2.5,borderColor:"black",shadow:{color:"black",blur:2.5,offsetX:3.5,offSetY:3.5}});else{var n=!1,i=[];if(e.match(/Wild/))i=this.cardSpriteReference.wild;else if(e.match(/Draw 4/))i=this.cardSpriteReference.Draw4;else{var r=e.split(" ")[0],o=e.split(" ").slice(1).join(" ");i[0]=this.cardSpriteReference.colorReference.indexOf(r),parseInt(o)?i[1]=parseInt(o):i[1]=this.cardSpriteReference.otherReference.indexOf(o)+10}var s=a.addShape({clipSpriteSheetX:i[1],clipSpriteSheetY:i[0],spriteLengthX:this.cardSpriteColumn,spriteLengthY:this.cardSpriteRow,kind:"roundedRectangle",color:"white",w:205,h:291,clip:!0,clipImageLink:ae,borderRadius:40,border:!0,borderWidth:2.5,borderColor:"black",shadow:{color:"black",blur:2.5,offsetX:3.5,offSetY:3.5}}),c=function(){s.clipSpriteSheetX=null,s.changeClipImage("assets/back.svg")},l=function(){s.clipSpriteSheetX=i[1],s.changeClipImage(ae)},u=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return new Promise((function(t){s.addAnimation("scaleX",0,100,(function(){e?c():l(),s.addAnimation("scaleX",1,100,t)}))}))};a.flip=function(){return u(n=!n)}}return a}},{key:"drawAnnouncement",value:function(){var e=this;this.announcementQueue=[],this.announcmentPerpetual=[],this.onAnnouncementPerpetual=!1,this.onAnnoucementChanged=!1,this.announcement=this.app.addObject({x:this.app.canvas.width/2,y:220,positionIndicator:!1}),this.annoucementText=this.announcement.addShape({kind:"text",font:"70px Futura",color:"orange",text:"",display:!1}),this.announcement.addShape({kind:"roundedRectangle",w:this.app.canvas.width/2,h:200,display:!1});var t=function(t){return e.annoucementText.addAnimation("opacity",0,100,(function(){e.annoucementText.display=!1,t&&t()}))},a=function(a,n){return t((function(){a(),e.annoucementText.display=!0,function(t){e.annoucementText.addAnimation("opacity",1,100,t)}(n)}))};this.updateAnnouncement=function(){if(e.announcementQueue.length>0&&!e.announcementQueue[0][3]){var n=Object(u.a)(e.announcementQueue[0],3),i=n[0],r=n[1],o=n[2];a((function(){e.annoucementText.text=i,e.annoucementText.color=r,setTimeout((function(){e.announcementQueue.splice(0,1),e.updateAnnouncement()}),o+100)})),e.announcementQueue[0][3]=!0}else{if(e.announcementQueue.length>0)return;if(!e.onAnnouncementPerpetual&&e.annoucementText.display)return t();if(e.onAnnouncementPerpetual&&(!e.annoucementText.display||e.onAnnoucementChanged))return a((function(){var t=Object(u.a)(e.announcmentPerpetual,2),a=t[0],n=t[1];e.annoucementText.text=a,e.annoucementText.color=n}))}}}},{key:"changeAnnoucementPerpetual",value:function(e,t){this.announcmentPerpetual=[e,t],this.onAnnoucementChanged=!0,this.updateAnnouncement()}},{key:"addToAnnoucementQueue",value:function(e,t,a){this.announcementQueue.push([e,t,a,!1]),this.updateAnnouncement()}},{key:"configureUnoMessage",value:function(){var e=this.app.addObject({x:this.app.canvas.width/2,y:this.app.canvas.height/2,zIndex:1e3}),t=e.addShape({kind:"img",spriteLink:"./assets/polygon.svg",scaleX:0,scaleY:0});e.display=!1,this.UNO=function(){e.display=!0,t.addAnimation("scaleX",1.5,400,(function(){setTimeout((function(){t.addAnimation("scaleX",0,100,(function(){return e.display=!1})),t.addAnimation("scaleY",0,100)}),500)})),t.addAnimation("scaleY",1.5,400)}}},{key:"configureStartGameMessage",value:function(){var e=this.app.addObject({x:this.app.canvas.width/2,y:this.app.canvas.height/2+100,display:!1}),t=e.addShape({kind:"text",text:"Start Game",color:"black",font:"50px Futura"});e.addShape({kind:"roundedRectangle",w:200,h:100,display:!1});var a=!1,n=function(){},i=function(){a?t.addAnimation("opacity",1,1e3,r):t.opacity=1},r=function(){a?t.addAnimation("opacity",0,1e3,i):t.opacity=1};e.pressedEvent((function(){a=!1,e.display=!1,n()})),this.initiateStartGameMessage=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};a||(n=t,a=!0,e.display=!0,r())},this.turnOffStartGameMessage=function(){e.display=!1}}}]),e}();window.mobileCheck=function(){var e,t=!1;return e=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(t=!0),t};var ie=window.mobileCheck()?ne:te,re=a(56),oe=(a(75),a(38)),se=function(){var e=Object(l.a)(c.a.mark((function e(t,a,n,i,r,o,s,d){var p,h,m,f,v,b,g,y,w,k,x,O;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p=new ie(t,a,s),h=null,m="/game",window.mobileCheck(),f=re(m,{query:{token:n}}),v=function(e){f.emit("Play Card",e)},b=function(){f.emit("Draw Card")},g=function(e){f.emit("Emote",e)},y=function(e){if(!e.length)return[];var t=Object(C.a)(e).map((function(e){return e.split(" ").slice(1).join(" ")})),a=e[0].split(" ")[0],n=t.filter((function(e){return parseInt(e)})).map((function(e){return parseInt(e)})),i=t.filter((function(e){return!parseInt(e)})),r=n.sort((function(e,t){return parseInt(e)-parseInt(t)}));return[].concat(Object(C.a)(r),Object(C.a)(i)).map((function(e){return"".concat(a," ").concat(e)}))},w=function(e,t){var a=e.filter((function(e){return e.match(/Wild/)||e.match(/Draw 4/)})),n={red:y(e.filter((function(e){return e.match(/red/)}))),blue:y(e.filter((function(e){return e.match(/blue/)}))),green:y(e.filter((function(e){return e.match(/green/)}))),yellow:y(e.filter((function(e){return e.match(/yellow/)})))},i=Object(C.a)(a);for(var r in n)i=[].concat(Object(C.a)(i),Object(C.a)(n[r]));return i},k=function(){return f.emit("Add Bot")},x=function(e){if("Wild"===e||"Draw 4"===e||"Wild"===h.currentTopCard||"Draw 4"===h.currentTopCard)return!0;var t=h.currentTopCard.split(" ")[0],a=h.currentTopCard.split(" ").slice(1).join(" "),n=e.split(" ")[0],i=e.split(" ").slice(1).join(" ");return t===n||a===i},O=function(){var e=Object(l.a)(c.a.mark((function e(t){var a,n,s,d,m,g,y,O,E,j,S,C,A,R,M,T,D,L,N,P,X,Y;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.info(t),a=h?oe.cloneDeep(h):null,h=t,parseInt(h.onTurn)==i?(p.awaitSelection(x).then((function(e){p.cancelDraw(),p.cancelSelection(),v(e)})),p.awaitDraw().then((function(){p.cancelSelection(),p.cancelDraw(),b()}))):(p.cancelDraw(),p.cancelSelection()),!a){e.next=113;break}if(n=h.feed.slice(a.feed.length),s=h.directives.slice(a.directives.length),d=h.players.map((function(e){return e.username})),p.updateLeaderboard(d,h.players.map((function(e){return e.cards.length})),h.players.map((function(e){return e.userid?e.point:void 0}))),n.length&&n.forEach((function(e){return p.addToAnnoucementQueue(e,"black",500)})),!s.length){e.next=107;break}m=Object(I.a)(s),e.prev=12,m.s();case 14:if((g=m.n()).done){e.next=99;break}y=Object(u.a)(g.value,3),O=y[0],E=y[1],j=y[2],e.t0=O,e.next=1===e.t0?19:2===e.t0?29:3===e.t0?47:4===e.t0?65:5===e.t0?73:7===e.t0?76:8===e.t0?83:96;break;case 19:if(E!==i){e.next=26;break}return e.next=22,p.animatePlayerDraw();case 22:S=h.players[i].cards.slice(a.players[i].cards.length)[0],x(S)?v(S):f.emit("Pass Turn"),e.next=28;break;case 26:return e.next=28,p.animateLeaderboardDraw();case 28:return e.abrupt("break",97);case 29:if(E!==i){e.next=39;break}C=0;case 31:if(!(C<4)){e.next=37;break}return e.next=34,p.animatePlayerDraw();case 34:C++,e.next=31;break;case 37:e.next=46;break;case 39:A=0;case 40:if(!(A<4)){e.next=46;break}return e.next=43,p.animateLeaderboardDraw();case 43:A++,e.next=40;break;case 46:return e.abrupt("break",97);case 47:if(E!==i){e.next=57;break}R=0;case 49:if(!(R<2)){e.next=55;break}return e.next=52,p.animatePlayerDraw();case 52:R++,e.next=49;break;case 55:e.next=64;break;case 57:M=0;case 58:if(!(M<2)){e.next=64;break}return e.next=61,p.animateLeaderboardDraw();case 61:M++,e.next=58;break;case 64:return e.abrupt("break",97);case 65:if(E!==i){e.next=70;break}return e.next=68,p.animatePlayerPlay(h.currentTopCard);case 68:e.next=72;break;case 70:return e.next=72,p.animateLeaderboardPlay(h.currentTopCard);case 72:return e.abrupt("break",97);case 73:return e.next=75,p.UNO();case 75:return e.abrupt("break",97);case 76:return T=function(){var e=Object(l.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=0;case 1:if(!(t<4)){e.next=7;break}return e.next=4,p.animatePlayerDraw();case 4:t++,e.next=1;break;case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),D=function(){var e=Object(l.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=0;case 1:if(!(t<4)){e.next=7;break}return e.next=4,p.animateLeaderboardDraw();case 4:t++,e.next=1;break;case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.next=80,T();case 80:return e.next=82,D();case 82:return e.abrupt("break",97);case 83:L=0;case 84:if(!(L<j)){e.next=95;break}if(E!==i){e.next=90;break}return e.next=88,p.animatePlayerPlay(h.currentTopCard);case 88:e.next=92;break;case 90:return e.next=92,p.animateLeaderboardPlay(h.currentTopCard);case 92:L++,e.next=84;break;case 95:case 96:return e.abrupt("break",97);case 97:e.next=14;break;case 99:e.next=104;break;case 101:e.prev=101,e.t1=e.catch(12),m.e(e.t1);case 104:return e.prev=104,m.f(),e.finish(104);case 107:parseInt(a.onTurn)!=parseInt(h.onTurn)&&h.onTurn>=0&&p.updateTurnIndicator(parseInt(h.onTurn)),N=a.players[i].cards,P=h.players[i].cards,JSON.stringify(N)!==JSON.stringify(P)&&p.updateCards(w(h.players[i].cards,h.currentTopCard)),e.next=123;break;case 113:X=h.gameMode,Y=h.players.map((function(e){return e.username})),p.updateLeaderboard(Y,h.players.map((function(e){return e.cards.length})),h.players.map((function(e){return e.userid?e.point:void 0}))),p.updateCards(w(h.players[i].cards,h.currentTopCard)),h.onTurn>=0&&p.updateTurnIndicator(h.onTurn),p.createPlayDeck(h.currentTopCard),p.drawTutorial(X),p.showTutorial(),p.initiateWithGameMode(X),p.createActionPanel({CopyLink:r,LeaveGame:o,RestartGame:function(){return f.emit("Restart Game")}},X);case 123:!h.inGame&&h.players.length>1&&!h.endGame?p.initiateStartGameMessage((function(){return f.emit("Start Game")})):p.turnOffStartGameMessage(),!h.inGame&&h.players.length<4&&!h.endGame?p.startAddBot(k):p.cancelAddBot();case 125:case"end":return e.stop()}}),e,null,[[12,101,104,107]])})));return function(t){return e.apply(this,arguments)}}(),f.on("Update",O),f.on("New Game",(function(e){p.kill(),(p=new ie(t,a,s)).drawEmoteChooser(g),h=null,O(e)})),f.on("End Game",(function(e){var t,a=e.win,n=e.changeInPoint;console.log(n),t="Competitive Player"!==h.gameMode?function(){return f.emit("Restart Game")}:d,p.activateEndGame(h.players[a].username,t,n?n[i]:null),console.log("endGame")})),f.on("Choose Color",Object(l.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.chooseColor();case 2:t=e.sent,f.emit("Choose Color",t);case 4:case"end":return e.stop()}}),e)})))),f.on("Error",(function(e){return console.log(e)})),f.on("Emote",(function(e){var t=e.emoji,a=e.userid;p.emote(h.players[a].username,["green","red","black","blue"][a],t)})),f.on("Critical Error",o),p.drawEmoteChooser(g),e.abrupt("return",(function(){f.close(),p.kill()}));case 22:case"end":return e.stop()}}),e)})));return function(t,a,n,i,r,o,s,c){return e.apply(this,arguments)}}(),ce=a(18),le=a(14),ue=S.dispatch,de=function(){var e=Object(l.a)(c.a.mark((function e(){var t,a,n,i,r,o,s,l;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=S.getState(),a=t.userToken,e.next=3,le.baseAPI.post("/createUser",{gameMode:"Skirmish"},{headers:{Authorization:"JWT ".concat(a)}});case 3:n=e.sent,i=n.data,r=i.error,o=i.message,s=i.token,l=i.playerid,r?ce.a.error(o):ue({type:"LOG_IN_SKIRMISH_GAME",token:s,playerid:l});case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),pe=Object(d.b)((function(e){return{token:e.token,playerid:e.playerid,id:e.id,skirmish:e.skirmish,userToken:e.userToken}}),(function(e){return{dispatch:e}}))((function(e){var t=e.token,a=e.playerid,r=e.id,o=e.dispatch,s=e.skirmish,u=e.userToken,d=e.triggerCompetitive,p=Object(n.useRef)(),h=Object(n.useRef)(),m=Object(n.useRef)(),f=function(e){var t=document.createElement("textarea");t.value=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t),ce.a.success("Copied!")},v="http://zorfling-uno.herokuapp.com/join/".concat(r),b=s?function(){return o({type:"LOG_OUT_SKIRMISH_GAME"})}:function(){return o({type:"LOG_OUT"})},w=function(){var e=Object(l.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,de();case 2:g(u,(function(e){var t=e.token,a=e.playerid;y(),o({type:"LOG_IN",token:t,playerid:a}),d()}),(function(e){o({type:"END_MATCHMAKING"}),ce.a.error(e)}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),k=function(){},x=function(){var e=Object(l.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,se(p.current,h.current,t,a,(function(){return f(v)}),b,m.current,w);case 2:return e.abrupt("return",k=e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){return x(),function(){k()}}),[t]),i.a.createElement("div",{className:"App"},!window.mobileCheck()&&i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"d-flex game",style:{alignItems:"center",height:"100%",width:"100%",position:"absolute"}},i.a.createElement("canvas",{ref:p,style:{width:850,height:650,margin:"auto",backgroundColor:"transparent"}})),i.a.createElement("div",{className:"d-flex game2",style:{alignItems:"center",height:"100%",width:"100%",position:"absolute"}},i.a.createElement("canvas",{ref:h,style:{width:850,height:650,margin:"auto",backgroundColor:"transparent"}}))),window.mobileCheck()&&i.a.createElement("div",{className:"position-absolute",id:"scrollable",style:{overflowX:"auto",overflowY:"visible",position:"absolute",top:"0px",left:"0px",width:"100%",height:"100%"}},i.a.createElement("canvas",{ref:p,style:{zIndex:"100",position:"fixed",left:0,top:0,width:"100%",height:"100%",margin:"auto",backgroundColor:"transparent"}}),i.a.createElement("canvas",{ref:h,style:{zIndex:"0",position:"fixed",left:0,top:0,width:"100%",height:"100%",margin:"auto"}}),i.a.createElement("canvas",{ref:m,style:{zIndex:"1000",margin:"auto",position:"absolute",bottom:0,left:0}})))})),he=a(22),me=a.n(he),fe=a(19),ve=a(44),be=a(47),ge=a.n(be),ye=function(){return i.a.createElement("div",{className:"mt-5 mb-5 floating w-100 text-center"},i.a.createElement("img",{src:ge.a,style:Object(ve.a)({width:300,margin:"auto"},"width","200px"),className:""}))},we=a(14).join,ke=Object(d.b)((function(e){return{tempJoinId:e.tempJoinId}}),(function(e){return{dispatch:e}}))((function(e){var t=e.dispatch,a=(e.changeHistory,e.tempJoinId),r=Object(n.useState)(!1),o=Object(u.a)(r,2),s=o[0],d=o[1];Object(n.useEffect)((function(){console.log(a),a||t({type:"JOINED"})}),[]);var p=function(){var e=Object(l.a)(c.a.mark((function e(n){var i,r,o,s,l,u;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.username,d(!0),console.log(a),e.next=5,we(a,i);case 5:r=e.sent,o=r.data,s=o.token,l=o.id,u=o.playerid,console.log(o),t({type:"JOIN_LOG_IN",token:s,id:l,playerid:u}),d(!1);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return i.a.createElement("div",{className:"container"},i.a.createElement("div",{className:"row ".concat(window.mobileCheck()?"":"w-75"," mx-auto"),style:{maxWidth:window.mobileCheck()?1e5:400}},!s&&i.a.createElement("div",{className:"text-center w-100 mx-auto",style:{fontFamily:"Arial Bold"}},i.a.createElement(ye,null),i.a.createElement("div",null,i.a.createElement("i",null,"One")," is an UNO-like card game that is completely playable online."),i.a.createElement("div",{className:"text-secondary"},"Made by Long Tran"),i.a.createElement("div",{className:"pt-5 pb-5 mt-3",style:{boxShadow:"0px 4px 16px rgba(31, 31, 31, 0.16)",border:"1px solid black",borderRadius:"15px",backgroundColor:"white"}},i.a.createElement(fe.c,{initialValues:{username:""},onSubmit:p},(function(e){var t=e.handleSubmit,a=e.handleChange,n=e.handleBlur;return i.a.createElement(fe.b,null,i.a.createElement("div",{className:"container w-50"},i.a.createElement("label",{className:"font-weight-bold"},"Nickname"),i.a.createElement("input",{type:"text",name:"username",className:"form-control",onChange:a,onBlur:n}),i.a.createElement("button",{className:"btn btn-success mt-4",onSubmit:t},"Join game!")))}))))),i.a.createElement("div",{style:{position:"absolute",top:"50%",width:"100%"}},i.a.createElement(me.a,{color:"blue",loading:s,width:"200px",css:{margin:"auto"}})))})),xe=a(14).create;function Oe(e){return i.a.createElement(fe.a,{name:e.name},(function(t){var a=t.field,n=t.form;return i.a.createElement("div",{className:"ml-n3"},i.a.createElement("input",Object.assign({className:"custom-control-input",type:"checkbox"},e,{checked:a.value.includes(e.value),onChange:function(){if(a.value.includes(e.value)){var t=a.value.filter((function(t){return t!==e.value}));n.setFieldValue(e.name,t)}else{var i=a.value.concat(e.value);n.setFieldValue(e.name,i)}}})),i.a.createElement("label",{className:"ml-3"},e.displayname))}))}var Ee=Object(p.f)(Object(d.b)(null,(function(e){return{dispatch:e}}))((function(e){var t=e.dispatch,a=(e.history,Object(n.useState)(!1)),r=Object(u.a)(a,2),o=r[0],s=r[1],d=function(){var e=Object(l.a)(c.a.mark((function e(a){var n,i,r,o,l,u,d;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.username,i=a.houseRule,s(!0),e.next=4,xe(n,i);case 4:r=e.sent,o=r.data,l=o.token,u=o.id,d=o.playerid,t({type:"LOG_IN",token:l,id:u,playerid:d}),s(!1);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return i.a.createElement("div",{className:"container background"},i.a.createElement("div",{className:"row ".concat(window.mobileCheck()?"":"w-75"," mx-auto"),style:{maxWidth:window.mobileCheck()?1e5:400,fontFamily:"Arial Bold"}},!o&&i.a.createElement("div",{className:"text-center mx-auto w-100 position-relative"},i.a.createElement(ye,null),i.a.createElement("div",null,i.a.createElement("i",null,"One")," is an UNO-like card game that is completely playable online."),i.a.createElement("div",{className:"text-secondary"},"Made by Long Tran"),i.a.createElement("div",{className:"pt-4 pb-4 mt-3",style:{boxShadow:"0px 4px 16px rgba(31, 31, 31, 0.16)",border:"1px solid black",backgroundColor:"white",borderRadius:"15px"}},i.a.createElement(fe.c,{initialValues:{username:"",houseRule:[]},onSubmit:d},(function(e){var t=e.handleSubmit,a=e.handleChange,n=e.handleBlur;e.values;return i.a.createElement(fe.b,null,i.a.createElement("div",{className:"container form-group"},i.a.createElement("div",{className:"w-50 mx-auto"},i.a.createElement("label",{className:"font-weight-bold "},"Nickname:"),i.a.createElement("input",{type:"username",name:"username",className:"form-control",onChange:a,onBlur:n})),i.a.createElement("label",{className:"font-weight-bold mt-3"},"House Rules:"),i.a.createElement("div",{className:" custom-control custom-checkbox mt-n1"},i.a.createElement(Oe,{value:"tripledouble",name:"houseRule",displayname:"Allow triple/double",className:""})),i.a.createElement("button",{className:"btn btn-success mt-4",onSubmit:t},"Create game!"),i.a.createElement("div",{className:"mt-2"},i.a.createElement(h.b,{to:"/auth",className:"text-primary text-underline"},"New! Sign up to keep score and play multiplayer"))))}))),i.a.createElement("p",{className:"text-secondary mt-2"},"Joining a friend's game? Ask them for a personal link!"))),i.a.createElement("div",{style:{position:"absolute",top:"50%",width:"100%"}},i.a.createElement(me.a,{color:"blue",loading:o,width:"200px",css:{margin:"auto"}})))}))),je=(a(157),Object(d.b)(null,(function(e){return{dispatch:e}}))((function(e){var t=e.dispatch,a=Object(n.useState)(!1),r=Object(u.a)(a,2),o=r[0],s=r[1],d=Object(n.useState)(!1),p=Object(u.a)(d,2),h=p[0],m=p[1],f=function(e){var a=e.error,n=e.token,i=e.message;if(s(!1),a)return ce.a.error(i);t({type:"LOG_IN_USER",userToken:n})},v=function(){var e=Object(l.a)(c.a.mark((function e(t){var a,n,i,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.username,n=t.password,s(!0),e.next=4,le.baseAPI.post("/login",{username:a,password:n});case 4:i=e.sent,r=i.data,f(r);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=function(){var e=Object(l.a)(c.a.mark((function e(t){var a,n,i,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.username,n=t.password,s(!0),e.next=4,le.baseAPI.post("/signup",{username:a,password:n});case 4:i=e.sent,r=i.data,f(r);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"w-100 mx-auto pb-5"},i.a.createElement(ye,null),!o&&i.a.createElement("div",{className:"container bg-light signInBox pt-5 pb-2 pl-5 pr-5"},h&&i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"text-center"},i.a.createElement("h6",{className:"font-weight-bold "},"Sign In ",i.a.createElement("a",{className:" font-weight-light",href:"/",onClick:function(e){e.preventDefault(),m(!1)}},"| Sign Up"))),i.a.createElement(fe.c,{initialValues:{username:"",password:""},onSubmit:v},(function(e){var t=e.handleChange,a=e.handleSubmit,n=e.handleBlur;return i.a.createElement(fe.b,null,i.a.createElement("div",{className:"form-group mt-3"},i.a.createElement("label",{className:"text-secondary"},"Username:"),i.a.createElement("input",{type:"username",name:"username",onChange:t,onBlur:n,className:"form-control"}),i.a.createElement("label",{className:"text-secondary mt-2"},"Password"),i.a.createElement("input",{type:"password",name:"password",onChange:t,onBlur:n,className:"form-control"}),i.a.createElement("button",{className:"btn btn-success mt-3",onSubmit:a},"Sign In")))}))),!h&&i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"text-center"},i.a.createElement("h6",{className:"font-weight-bold "},"Sign Up ",i.a.createElement("a",{className:" font-weight-light",href:"/",onClick:function(e){e.preventDefault(),m(!0)}},"| Sign In"))),i.a.createElement(fe.c,{initialValues:{username:"",password:""},onSubmit:b},(function(e){var t=e.handleChange,a=e.handleSubmit,n=e.handleBlur;return i.a.createElement(fe.b,null,i.a.createElement("div",{className:"form-group mt-3"},i.a.createElement("label",{className:"text-secondary"},"Username:"),i.a.createElement("input",{type:"username",name:"username",onChange:t,onBlur:n,className:"form-control"}),i.a.createElement("label",{className:"text-secondary mt-2"},"Password"),i.a.createElement("input",{type:"password",name:"password",onChange:t,onBlur:n,className:"form-control"}),i.a.createElement("label",{className:"text-secondary mt-2"},"Did Carole Baskin killed her husband? (Not required)"),i.a.createElement("div",null,i.a.createElement("input",{type:"checkbox"}),i.a.createElement("span",{className:"ml-2"},"Absolutely")),i.a.createElement("button",{className:"btn btn-success mt-3",onSubmit:a},"Sign Up")))})))),i.a.createElement("div",{style:{position:"absolute",top:"50%",width:"100%"}},i.a.createElement(me.a,{color:"blue",loading:o,width:"200px",css:{margin:"auto"}}))))}))),Se=Object(d.b)((function(e){return{userToken:e.userToken,matchMaking:e.matchMaking}}),(function(e){return{dispatch:e}}))((function(e){var t=e.userToken,a=e.dispatch,r=e.matchMaking,o=e.triggerCompetitive,s=Object(n.useState)(null),d=Object(u.a)(s,2),p=d[0],h=d[1],m=Object(n.useState)(!1),f=Object(u.a)(m,2),v=f[0],b=f[1],w=function(){var e=Object(l.a)(c.a.mark((function e(){var a,n,i,r,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,le.baseAPI.get("/user",{headers:{Authorization:"JWT ".concat(t)}});case 2:if(a=e.sent,n=a.data,i=n.error,r=n.message,o=n.user,!i){e.next=9;break}return e.abrupt("return",ce.a.error(r));case 9:h(o);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){w()}),[]);var k=function(){var e=Object(l.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(b(!0),!r){e.next=6;break}y(),a({type:"END_MATCHMAKING"}),e.next=9;break;case 6:return e.next=8,de();case 8:g(t,(function(e){var t=e.token,n=e.playerid;y(),a({type:"LOG_IN",token:t,playerid:n}),o()}),(function(e){a({type:"END_MATCHMAKING"}),ce.a.error(e)}));case 9:b(!1);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),x=function(){var e=Object(l.a)(c.a.mark((function e(){var n,i,r,o,s,l;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b(!0),e.next=3,le.baseAPI.post("/createUser",{gameMode:"Competitive Bot"},{headers:{Authorization:"JWT ".concat(t)}});case 3:n=e.sent,i=n.data,r=i.error,o=i.message,s=i.token,l=i.playerid,console.log(i),r?ce.a.error(o):a({type:"LOG_IN",token:s,playerid:l}),b(!1);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),O=function(){var e=Object(l.a)(c.a.mark((function e(){var n,i,r,o,s,l,u;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b(!0),e.next=3,le.baseAPI.post("/createUser",{gameMode:"Casual"},{headers:{Authorization:"JWT ".concat(t)}});case 3:n=e.sent,i=n.data,r=i.error,o=i.message,s=i.token,l=i.playerid,u=i.id,console.log(i),r?ce.a.error(o):a({type:"LOG_IN",token:s,playerid:l,id:u}),b(!1);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return console.info(p),i.a.createElement("div",{className:""},i.a.createElement("div",{className:"container-fluid",style:{backgroundColor:"white"}},i.a.createElement("div",{className:"row "},i.a.createElement("div",{className:"col-auto pt-2 pb-2 ml-2"},i.a.createElement("img",{src:ge.a,style:{width:50}})),i.a.createElement("div",{className:"align-self-end text-secondary mb-2 text-sm",style:{fontSize:15}},"Made by Long Tran"),i.a.createElement("div",{className:"col-auto ml-auto align-self-end mb-2"},i.a.createElement("a",{href:"/",className:"text-primary mr-2",onClick:function(e){e.preventDefault()}},"Give Feedback"),i.a.createElement("a",{href:"/",className:"text-danger",onClick:function(e){e.preventDefault(),a({type:"LOG_OUT_USER"})}},"Log Out")))),p&&!v&&i.a.createElement("div",{className:"container mt-3"},i.a.createElement("h1",null,"Welcome back! ",p.username),i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-auto"},i.a.createElement("h3",null,"Stats:"),i.a.createElement("ul",null,i.a.createElement("li",null,i.a.createElement("span",{className:"font-weight-bold"},"Games Played:")," ",p.gamePlayed),i.a.createElement("li",null,i.a.createElement("span",{className:"font-weight-bold"},"Games Won:")," ",p.gameWon),i.a.createElement("li",null,i.a.createElement("span",{className:"font-weight-bold"},"Games Lost:")," ",p.gameLost),i.a.createElement("li",null,i.a.createElement("span",{className:"font-weight-bold"},"Win Rate:")," ",Math.round(p.gamePlayed?p.gameWon/p.gamePlayed*100:0),"%"),i.a.createElement("li",null,i.a.createElement("span",{className:"font-weight-bold"},"Total Point:")," ",p.points),i.a.createElement("li",null,i.a.createElement("span",{className:"font-weight-bold"},"Rank:")," #",p.rank[0]," (",~~(p.rank[0]/p.rank[1]*100+.5)," Percentile)"),i.a.createElement("li",null,i.a.createElement("span",{className:"font-weight-bold"},"Karma:")," ",p.karma,"/10"),i.a.createElement("div",{className:"text-secondary text-small",style:{maxWidth:300,fontSize:15}},"Karma is gained when you finish a game and lost when you quit midgame. Higher karma means shorter matchmaking time."))),i.a.createElement("div",{className:"col-auto ml-lg-5 pb-5"},i.a.createElement("h3",null,"Play Now:"),i.a.createElement("div",{className:"mx-auto text-center mt-4 mx-auto"},i.a.createElement("button",{className:"btn btn-lg btn-outline-dark mx-auto w-100",onClick:k},r?"Stop Matchmaking":"Start Matchmaking"),i.a.createElement("br",null),!r&&i.a.createElement(i.a.Fragment,null,i.a.createElement("button",{className:"btn btn-lg btn-outline-primary mx-auto mt-3 w-100",onClick:x},"Train with Bot"),i.a.createElement("br",null),i.a.createElement("button",{className:"btn btn-lg btn-outline-success mx-auto mt-3 w-100",onClick:O},"Create a casual game"),i.a.createElement("div",{className:"text-secondary mt-1"},"Tip! Training with bot still give you points!")),r&&i.a.createElement(i.a.Fragment,null,i.a.createElement("button",{className:"btn btn-lg btn-outline-primary mx-auto mt-3 w-100",onClick:de},"Create Skirmish Game"),i.a.createElement("br",null)))),i.a.createElement("hr",{className:"d-block d-md-none"}),i.a.createElement("div",{className:"col-auto ml-lg-5 pb-5"},i.a.createElement("h3",null,"Messages:"),i.a.createElement("div",{className:"mx-auto text-center mt-4 mx-auto"},"You have no messages yet")))),i.a.createElement("div",{style:{position:"absolute",top:"50%",width:"100%"}},i.a.createElement(me.a,{color:"blue",loading:!p||v,width:"200px",css:{margin:"auto"}})))})),Ie=a(90),Ce=a.n(Ie);window.mobileCheck=function(){var e,t=!1;return e=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(t=!0),t};var Ae=Object(p.f)(Object(d.b)((function(e){return{loggedIn:e.loggedIn,joined:e.joined,loggedInUser:e.loggedInUser,matchMaking:e.matchMaking,skirmish:e.skirmish,userToken:e.userToken}}),(function(e){return{dispatch:e}}))((function(e){var t=e.loggedIn,a=e.dispatch,r=e.history,o=e.joined,s=e.loggedInUser,d=e.matchMaking,h=e.skirmish,m=e.userToken,f=window.location.pathname,v=Object(n.useState)(!1),b=Object(u.a)(v,2),g=b[0],w=b[1],k=Object(n.useState)(!1),x=Object(u.a)(k,2),O=x[0],E=x[1],j=Object(n.useState)(!1),S=Object(u.a)(j,2),I=S[0],C=S[1],A=function(){var e=Object(l.a)(c.a.mark((function e(t){var n,i,r,o,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return C(!0),e.next=3,le.baseAPI.post("/joinUser",{id:t},{headers:{Authorization:"JWT ".concat(m)}});case 3:n=e.sent,i=n.data,r=i.token,o=i.playerid,s=i.gameid,a({type:"JOIN_LOG_IN",token:r,playerid:o,gameid:s}),C(!1);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){if(K.stopAll(),f.match(/join/)&&!o)if(s)A(f.split("/")[2]);else{var e=f.split("/")[2];a({type:"LOG_OUT_WITH_TEMP_JOIN",tempJoinId:e}),r.push("/join")}else t?f.match(/game/)||r.push("/game"):s?r.push("/profile"):f.match("/auth")||r.push("/")}),[t,o,s]),i.a.createElement(i.a.Fragment,null,i.a.createElement(p.c,null,i.a.createElement(p.a,{path:"/game",exact:!0},i.a.createElement(pe,{triggerCompetitive:function(){E(!0),setTimeout((function(){return E(!1)}),3e3)}})),i.a.createElement(p.a,{path:"/join",exact:!0},i.a.createElement(ke,{changeHistory:r})),i.a.createElement(p.a,{path:"/",exact:!0,component:Ee}),i.a.createElement(p.a,{path:"/auth",exact:!0,component:je}),i.a.createElement(p.a,{path:"/profile",exact:!0},i.a.createElement(Se,{triggerCompetitive:function(){E(!0),setTimeout((function(){return E(!1)}),3e3)}}))),i.a.createElement("div",{className:"backgrounddiv"}),d&&i.a.createElement("div",{className:"matchMaking pt-5 pb-5 text-secondary",style:{transform:g?"translate(".concat(window.mobileCheck()?"90%":"100%",", 0%)"):"none",bottom:window.mobileCheck()?0:50,right:window.mobileCheck()?0:50,width:window.mobileCheck()?"100%":400}},i.a.createElement("div",null,"Waiting for a match..."),i.a.createElement("div",{style:{fontSize:20}},h&&"Enjoy the skirmish game!",!h&&i.a.createElement("a",{href:"/",onClick:function(e){e.preventDefault(),de()}},"Create a skirmish game")),i.a.createElement(Ce.a,{css:{margin:"auto",marginTop:20},color:"blue",loading:d}),i.a.createElement("div",null,i.a.createElement("a",{href:"/",onClick:function(e){e.preventDefault(),y(),a({type:"END_MATCHMAKING"})}},"End matchmaking")),i.a.createElement("div",{className:"position-absolute icon",onClick:function(e){w(!g)}},g&&"+",!g&&"-")),i.a.createElement("div",{className:"matchMaking pt-5 pb-5 text-secondary",style:{transform:O?"none":"translate(120%, 0%)",bottom:window.mobileCheck()?0:50,right:window.mobileCheck()?0:50,width:window.mobileCheck()?"100%":400}},i.a.createElement("div",{className:"font-weight-bold"},"You are playing with another player! Wave \ud83d\udc4b"),i.a.createElement("div",{className:"text-secondary"},"Enjoy the game!")),i.a.createElement("div",{style:{position:"absolute",top:"50%",width:"100%"}},i.a.createElement(me.a,{color:"blue",loading:I,width:"200px",css:{margin:"auto"}})))})));var Re=function(){return i.a.createElement(d.a,{store:S},i.a.createElement(h.a,null,i.a.createElement(Ae,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(Re,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},47:function(e,t,a){e.exports=a.p+"static/media/polygon.8ae264e2.svg"},92:function(e,t,a){e.exports=a(158)},97:function(e,t,a){},99:function(e,t,a){}},[[92,1,2]]]);
//# sourceMappingURL=main.e3c65de6.chunk.js.map